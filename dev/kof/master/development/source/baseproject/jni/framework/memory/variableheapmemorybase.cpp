#include "program files (x86)/microsoft visual studio 14.0/vc/include/xmemory"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/thr/xthread"
#include "dev/kof/master/development/source/baseproject/jni/framework/memory/globalheapmemory.h"
#include "dev/kof/master/development/source/baseproject/jni/framework/memory/fixmemory.h"
#include "dev/silverware/git/sdk/input/agsdlmappingparser.h"
#include "dev/kof/master/development/source/ps4project/toolkit/geommath/matrix4unaligned.h"
#include "dev/kof/master/development/source/baseproject/jni/framework/ag/3rdparty/vectormath/scalar_cpp/quat_aos.h"
#include "dev/silverware/git/sdk/platforms/pc/system/agpcsysteminfo.h"
#include "dev/silverware/git/sdk/agreferencecountinl.h"
#include "dev/kof/master/development/source/middleware/autodesk/scaleform/gfx_sdk/src/kernel/sf_refcount.h"
#include "dev/kof/master/development/source/middleware/autodesk/scaleform/gfx_sdk/src/kernel/sf_memory.h"
#include "dev/kof/master/development/source/middleware/autodesk/scaleform/gfx_sdk/src/kernel/sf_memoryheap.h"
#include "dev/kof/master/development/source/middleware/autodesk/scaleform/gfx_sdk/src/kernel/sf_stats.h"
#include "dev/kof/master/development/source/middleware/autodesk/scaleform/gfx_sdk/src/kernel/sf_timer.h"
#include "dev/kof/master/development/source/baseproject/jni/framework/ag/3rdparty/vectormath/cpp/internal/internal_sse.h"
#include "dev/silverware/git/sdk/3rdparty/steam/steamclientpublic.h"
#include "dev/kof/master/development/source/baseproject/jni/framework/ag/3rdparty/vectormath/cpp/internal/internal_types.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xatomic0.h"
#include "dev/kof/master/development/source/baseproject/jni/framework/memory/variableheapmemorybase.h"
#include "dev/kof/master/development/source/ps4project/toolkit/geommath/vector2unaligned.h"
#include "dev/silverware/git/sdk/agmemorystream.h"
#include "dev/kof/master/development/source/middleware/autodesk/scaleform/gfx_sdk/src/kernel/sf_sysalloc.h"
#include "dev/silverware/git/sdk/agmemorypool.h"
#include "dev/kof/master/development/source/baseproject/jni/framework/ag/3rdparty/vectormath/cpp/internal/internal_functions.h"
#include "dev/silverware/git/sdk/input/agcontrollerbuttoncomponent.h"
#include "dev/kof/master/development/source/middleware/autodesk/scaleform/gfx_sdk/src/kernel/sf_threads.h"
#include "dev/silverware/git/sdk/agpointerinl.h"
#include "dev/silverware/git/sdk/agstream.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/stdio.h"
#include "dev/kof/master/development/source/middleware/autodesk/scaleform/gfx_sdk/src/kernel/sf_types.h"
#include "dev/kof/master/development/source/baseproject/jni/framework/memory/physicalheapmemory.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/corecrt_wstdio.h"
#include "dev/silverware/git/sdk/agsemaphore.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/corecrt_stdio_config.h"
#include "dev/silverware/git/sdk/agsemaphore.inl"
#include "dev/silverware/git/sdk/agconditionvariable.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/condition_variable"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/deque"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/sys/stat.h"
#include "dev/kof/master/development/source/middleware/autodesk/scaleform/gfx_sdk/src/kernel/sf_allocinfo.h"
#include "dev/kof/master/development/source/baseproject/jni/framework/ag/3rdparty/vectormath/scalar_cpp/boolinvec.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/time.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xtgmath.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xtr1common"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/corecrt_wstring.h"
#include "dev/kof/master/development/source/baseproject/jni/framework/thread/jobmanager.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/stdlib.h"
#include "program files (x86)/windows kits/8.1/include/shared/guiddef.h"
#include "dev/kof/master/development/source/ps4project/toolkit/geommath/vector3unaligned.h"
#include "program files (x86)/windows kits/8.1/include/shared/stralign.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/vcruntime_typeinfo.h"
#include "dev/kof/master/development/source/baseproject/jni/framework/util/resourcemanager.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xfacet"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xutility"
#include "dev/silverware/git/sdk/3rdparty/steam/isteamhtmlsurface.h"
#include "dev/kof/master/development/source/baseproject/jni/framework/ag/3rdparty/vectormath/cpp/vec_aos.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/list"
#include "dev/kof/master/development/source/baseproject/jni/framework/ag/3rdparty/vectormath/cpp/boolinvec.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/string.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/corecrt_memory.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/corecrt_memcpy_s.h"
#include "dev/kof/master/development/source/baseproject/jni/framework/ag/3rdparty/vectormath/scalar_cpp/vectormath_aos.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/wchar.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/corecrt_wconio.h"
#include "program files (x86)/windows kits/8.1/include/um/winnt.h"
#include "dev/silverware/git/sdk/agreferencedobjectinl.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/functional"
#include "dev/silverware/git/sdk/agpointer.h"
#include "program files (x86)/windows kits/8.1/include/shared/basetsd.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xstring"
#include "dev/silverware/git/sdk/agreferencedobject.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xmemory0"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/corecrt_wtime.h"
#include "dev/kof/master/development/source/middleware/autodesk/scaleform/gfx_sdk/src/kernel/heapmh/heapmh_sysallocmalloc.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/malloc.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/exception"
#include "dev/silverware/git/sdk/agconditionvariable.inl"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/vcruntime_exception.h"
#include "dev/kof/master/development/source/baseproject/jni/framework/ag/3rdparty/vectormath/scalar_cpp/mat_aos.h"
#include "dev/silverware/git/sdk/agthread.h"
#include "dev/silverware/git/sdk/agmutex.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/array"
#include "dev/silverware/git/sdk/agscopedlock.h"
#include "dev/silverware/git/sdk/3rdparty/steam/steam_api_internal.h"
#include "dev/kof/master/development/source/ps4project/baseproject/pcutil/pccontrolsmanager.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/algorithm"
#include "dev/silverware/git/sdk/input/aginputmanager.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/system_error"
#include "dev/silverware/git/sdk/agsingleton.h"
#include "dev/kof/master/development/source/ps4project/toolkit/geommath/vector4unaligned.h"
#include "dev/silverware/git/sdk/agmutex.inl"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/stdexcept"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/utility"
#include "dev/kof/master/development/source/baseproject/jni/framework/ag/3rdparty/vectormath/cpp/vecidx_aos.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/iosfwd"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/map"
#include "program files (x86)/windows kits/8.1/include/um/winuser.h"
#include "dev/silverware/git/sdk/memory/agallocators.h"
#include "dev/kof/master/development/source/baseproject/jni/framework/ag/3rdparty/vectormath/cpp/floatinvec.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xtree"
#include "dev/silverware/git/sdk/input/agcontrollercomponent.h"
#include "dev/silverware/git/sdk/3rdparty/steam/steam_api.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/tuple"
#include "dev/kof/master/development/source/ps4project/baseproject/pcutil/pcdummy.h"
#include "dev/silverware/git/sdk/util/agdelegate.h"
#include "dev/silverware/git/sdk/agreferencecount.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/vcruntime_new.h"
#include "dev/kof/master/development/source/baseproject/jni/framework/ag/3rdparty/vectormath/cpp/quat_aos.h"
#include "dev/kof/master/development/source/baseproject/jni/framework/ag/3rdparty/vectormath/scalar_cpp/floatinvec.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/vadefs.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xstddef"
#include "dev/silverware/git/sdk/agvector2.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/type_traits"
#include "dev/kof/master/development/source/baseproject/jni/framework/ag/3rdparty/vectormath/cpp/internal/internal_vec64.h"
#include "dev/silverware/git/sdk/agmath.h"
#include "dev/kof/master/development/source/middleware/autodesk/scaleform/gfx_sdk/src/kernel/sf_array.h"
#include "dev/kof/master/development/source/middleware/autodesk/scaleform/gfx_sdk/src/kernel/sf_allocator.h"
#include "dev/silverware/git/sdk/input/agcontroller.h"
#include "dev/silverware/git/sdk/system/aguser.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/cmath"
#include "dev/kof/master/development/source/middleware/autodesk/scaleform/gfx_sdk/src/kernel/sf_atomic.h"
#include "dev/silverware/git/sdk/agstring.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/math.h"
#include "dev/kof/master/development/source/baseproject/jni/framework/ag/3rdparty/vectormath/cpp/internal/internal_math.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/mutex"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/string"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/chrono"
#include "dev/kof/master/development/source/baseproject/jni/framework/libcommon.h"
#include "dev/kof/master/development/source/baseproject/jni/framework/ag/3rdparty/vectormath/scalar_cpp/vec_aos.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/limits"
#include "dev/silverware/git/sdk/3rdparty/steam/matchmakingtypes.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/ios"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xlocnum"
#include "dev/silverware/git/sdk/system/agsysteminfo.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xiosbase"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xlocale"
#include "program files (x86)/windows kits/8.1/include/um/winbase.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xlocinfo"
#include "dev/kof/master/development/source/baseproject/jni/framework/ag/3rdparty/vectormath/cpp/mat_aos.h"
#include "dev/kof/master/development/source/baseproject/jni/framework/debug/logging.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/vector"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/ctype.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/corecrt_wio.h"
#include "dev/kof/master/development/source/baseproject/jni/framework/memory/heapmemory.h"
#include "dev/kof/master/development/source/baseproject/jni/framework/thread/mutex.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/thread"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/memory"
#include "dev/kof/master/development/source/baseproject/jni/framework/memory/heapmemory.cpp"
#include "dev/kof/master/development/source/baseproject/jni/framework/thread/mutex.cpp"

std::piecewise_construct_t std::piecewise_construct; // 0x140889013
Fw::VariableHeapMemoryBase::VariableHeapMemoryBase(); // 0x1400475B0
void * Fw::VariableHeapMemoryBase::allocImpl(unsigned long size, unsigned long align, Fw::ALLOC_MODE mode); // 0x140047630
void Fw::VariableHeapMemoryBase::dealloc(void * ptr); // 0x140047660
void * Fw::VariableHeapMemoryBase::getNextAlloc(void * ptr); // 0x1400476F0
Fw::HeapMemory::Handle Fw::VariableHeapMemoryBase::createChildHeap(unsigned long size, const char * pName); // 0x140047710
void Fw::VariableHeapMemoryBase::destroyChildHeap(Fw::HeapMemory::Handle hHeap, unsigned long size); // 0x1400477A0
bool Fw::VariableHeapMemoryBase::isValid(); // 0x1400477C0
unsigned long Fw::VariableHeapMemoryBase::getSize(); // 0x1400477D0
unsigned long Fw::VariableHeapMemoryBase::getUsedSize(); // 0x140047010
unsigned long Fw::VariableHeapMemoryBase::getAllocatableSize(); // 0x140047020//decompilation failure at 140889013!
void __fastcall Fw::VariableHeapMemoryBase::VariableHeapMemoryBase(Fw::VariableHeapMemoryBase *this)
{
  `Fw::GlobalHeapMemory::GetInstance'::`2'::singleton.__vftable = (Fw::HeapMemory_vtbl *)&Fw::HeapMemory::`vftable';
  InitializeCriticalSection((LPCRITICAL_SECTION)&`Fw::GlobalHeapMemory::GetInstance'::`2'::singleton.m_Mutex);
  `Fw::GlobalHeapMemory::GetInstance'::`2'::singleton.m_Mutex.m_InitializeFlag = 0;
  `Fw::GlobalHeapMemory::GetInstance'::`2'::singleton.m_pParentHeap = 0i64;
  `Fw::GlobalHeapMemory::GetInstance'::`2'::singleton.__vftable = (Fw::HeapMemory_vtbl *)&Fw::VariableHeapMemoryBase::`vftable';
  *(_OWORD *)&`Fw::GlobalHeapMemory::GetInstance'::`2'::singleton.m_pSiblingHeap = 0i64;
  `Fw::GlobalHeapMemory::GetInstance'::`2'::singleton.m_pName = 0i64;
  qword_140ACBE58 = 0i64;
  unk_140ACBE60 = 0i64;
  qword_140ACBE70 = 0i64;
  qword_140ACBE78 = 0i64;
  dword_140ACBE80 = 0;
}

void *__fastcall Fw::VariableHeapMemoryBase::allocImpl(
        Fw::VariableHeapMemoryBase *this,
        unsigned int size,
        unsigned int align,
        Fw::ALLOC_MODE mode)
{
  _RTL_CRITICAL_SECTION *p_m_Mutex; // rbx

  p_m_Mutex = (_RTL_CRITICAL_SECTION *)&this->m_Mutex;
  EnterCriticalSection((LPCRITICAL_SECTION)&this->m_Mutex);
  LeaveCriticalSection(p_m_Mutex);
  return 0i64;
}

Fw::HeapMemory::Handle *__fastcall Fw::VariableHeapMemoryBase::createChildHeap(
        Fw::VariableHeapMemoryBase *this,
        Fw::HeapMemory::Handle *result,
        unsigned int size,
        const char *pName)
{
  unsigned __int64 v5; // rsi
  Fw::HeapMemory::Handle *v7; // rax
  Fw::HeapMemory::Handle v8; // [rsp+20h] [rbp-18h]

  v5 = size;
  if ( this->m_RestSize < size )
    _DummyLogging("func:%s %s");
  v8 = (Fw::HeapMemory::Handle)(unsigned __int64)aligned_malloc(v5, 0x20ui64);
  v7 = result;
  if ( v8.addr )
  {
    this->m_ChildSize += v5;
    *result = v8;
  }
  else
  {
    result->addr = 0i64;
    result->heap = 0i64;
  }
  return v7;
}

void __fastcall Fw::VariableHeapMemoryBase::dealloc(Fw::VariableHeapMemoryBase *this, void *ptr)
{
  Fw::VariableHeapMemoryBase::cList *v3; // rbx
  Fw::VariableHeapMemoryBase::cList *m_pNext; // rcx

  if ( ptr )
  {
    v3 = (Fw::VariableHeapMemoryBase::cList *)((char *)ptr - 40);
    EnterCriticalSection((LPCRITICAL_SECTION)&this->m_Mutex);
    this->m_RestSize += v3->m_AllocSizeMode & 0x3FFFFFFF;
    if ( v3->m_pPrev )
      v3->m_pPrev->m_pNext = v3->m_pNext;
    m_pNext = v3->m_pNext;
    if ( m_pNext )
      m_pNext->m_pPrev = v3->m_pPrev;
    if ( this->m_pFirstList == v3 )
      this->m_pFirstList = v3->m_pNext;
    if ( this->m_pLastList == v3 )
      this->m_pLastList = v3->m_pPrev;
    LeaveCriticalSection((LPCRITICAL_SECTION)&this->m_Mutex);
  }
}

void __fastcall Fw::VariableHeapMemoryBase::destroyChildHeap(
        Fw::VariableHeapMemoryBase *this,
        Fw::HeapMemory::Handle *hHeap,
        unsigned int size)
{
  if ( hHeap->addr )
  {
    this->m_ChildSize -= size;
    if ( hHeap->addr )
      aligned_free(hHeap->addr);
  }
}

__int64 __fastcall Fw::VariableHeapMemoryBase::getAllocatableSize(Fw::VariableHeapMemoryBase *this)
{
  __int64 result; // rax

  result = this->m_RestSize;
  if ( (unsigned int)result < 0x28 )
    return 0i64;
  return result;
}

Fw::VariableHeapMemoryBase::cList *__fastcall Fw::VariableHeapMemoryBase::getNextAlloc(
        Fw::VariableHeapMemoryBase *this,
        void *ptr)
{
  Fw::VariableHeapMemoryBase::cList *result; // rax

  if ( ptr )
    result = (Fw::VariableHeapMemoryBase::cList *)*((_QWORD *)ptr - 4);
  else
    result = this->m_pFirstList;
  if ( result )
    return (Fw::VariableHeapMemoryBase::cList *)((char *)result + 40);
  return result;
}

__int64 __fastcall Scaleform::Render::Hairliner::GetMeshVertexCount(Scaleform::Render::Hairliner *this)
{
  return LODWORD(this->OutVertices.Size);
}

__int64 __fastcall Fw::VariableHeapMemoryBase::getUsedSize(Fw::VariableHeapMemoryBase *this)
{
  return this->m_HeapSize - this->m_RestSize;
}

bool __fastcall Fw::VariableHeapMemoryBase::isValid(Fw::VariableHeapMemoryBase *this)
{
  return this->m_hHeap.addr != 0i64;
}

