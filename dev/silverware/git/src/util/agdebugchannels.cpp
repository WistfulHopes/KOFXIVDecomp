#include "program files (x86)/microsoft visual studio 14.0/vc/include/xfacet"
#include "dev/silverware/git/sdk/agcondition.h"
#include "dev/silverware/git/sdk/agconditionvariable.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/thread"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/condition_variable"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/memory"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xmemory"
#include "dev/silverware/git/sdk/agmutex.h"
#include "dev/silverware/git/sdk/agscopedlock.h"
#include "dev/silverware/git/sdk/agstring.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xtgmath.h"
#include "dev/silverware/git/sdk/filesystem/agpath.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xtr1common"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/string"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/vcruntime_typeinfo.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/stdlib.h"
#include "dev/silverware/git/sdk/filesystem/agfile.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/tuple"
#include "dev/silverware/git/sdk/system/aguser.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/ios"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xlocnum"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/stdexcept"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/exception"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/type_traits"
#include "program files (x86)/windows kits/8.1/include/shared/stralign.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xstddef"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/time.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xatomic0.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/system_error"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/mutex"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/map"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/chrono"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xtree"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/corecrt_wio.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/corecrt_wstring.h"
#include "dev/silverware/git/sdk/system/agsysteminfo.h"
#include "dev/silverware/git/sdk/agreferencedobjectinl.h"
#include "dev/silverware/git/sdk/agmutex.inl"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xutility"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/utility"
#include "program files (x86)/windows kits/8.1/include/shared/winerror.h"
#include "dev/silverware/git/sdk/agreferenceinl.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/iosfwd"
#include "program files (x86)/windows kits/8.1/include/shared/guiddef.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xlocinfo"
#include "dev/silverware/git/sdk/util/agperformancecounter.h"
#include "dev/silverware/git/sdk/agclock.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xiosbase"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/ctype.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xlocale"
#include "dev/silverware/git/sdk/agconditionvariable.inl"
#include "dev/silverware/git/sdk/platforms/pc/system/agpcsysteminfo.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/string.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/corecrt_memory.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/corecrt_memcpy_s.h"
#include "dev/silverware/git/sdk/agpointer.h"
#include "dev/silverware/git/sdk/agscratch.h"
#include "dev/silverware/git/sdk/agstringutils.h"
#include "dev/silverware/git/sdk/agreferencedobject.h"
#include "dev/silverware/git/sdk/agreferencecount.h"
#include "program files (x86)/windows kits/8.1/include/um/winnt.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/malloc.h"
#include "program files (x86)/windows kits/8.1/include/shared/basetsd.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/cmath"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/math.h"
#include "dev/silverware/git/sdk/agstream.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/sys/stat.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xstring"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/xmemory0"
#include "program files (x86)/windows kits/8.1/include/um/winuser.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/stdio.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/corecrt_wstdio.h"
#include "dev/silverware/git/sdk/agreferencecountinl.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/vcruntime_new.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/corecrt_stdio_config.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/wchar.h"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/corecrt_wconio.h"
#include "dev/silverware/git/sdk/util/agdebugchannels.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/thr/xthread"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/vcruntime_exception.h"
#include "program files (x86)/windows kits/8.1/include/um/winbase.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/functional"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/limits"
#include "program files (x86)/windows kits/10/include/10.0.10240.0/ucrt/corecrt_wtime.h"
#include "dev/silverware/git/sdk/agcondition.inl"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/vadefs.h"
#include "dev/silverware/git/sdk/agpointerinl.h"
#include "program files (x86)/microsoft visual studio 14.0/vc/include/vector"

AgDebugChannelData AgDebugChannels::dummyChannelData; // 0x140A8FF00
AgDebugChannels * AgDebugChannels::ms_instance; // 0x140A8FEE8
bool _log__LINE__forceInit; // 0x140A8FEFC
void(*_log__LINE__forceInit$initializer$)(); // 0x1407406E8
void(*??dummyChannelData$initializer$@AgDebugChannels@@0P6AXXZEA@@3P6AXXZEA)(); // 0x1407406D8
_iobuf * gs_logFile; // 0x140A8FEF0
long gs_consoleOpened; // 0x140A8FEF8
AgMutex gs_logMutex; // 0x140A8FF28
void(*gs_logMutex$initializer$)(); // 0x1407406E0
AgDebugChannelData * rootChannel; // 0x140A8FF50
AgDebugChannels::AgDebugChannels(); // 0x140678FF0
AgDebugChannels & AgDebugChannels::getInstance(); // 0x14067A980
void AgDebugChannels::_initDefaultLoggers(); // 0x140679930
void AgDebugChannels::_initRootChannel(); // 0x140679B40
AgDebugChannelData * AgDebugChannels::get(AgStringRef name); // 0x14067A770
void AgDebugChannelData::log(AgLogVerbosity verbosity, const char * text, char * args); // 0x14067AC60
long AgDebugChannelData::isEnabled(); // 0x14067AAF0
AgLogVerbosity AgDebugChannelData::getVerbosity(); // 0x14067AA10
void AgDebugChannelData::setConfiguration(char enable, AgLogVerbosity verbosity, AgStringRef out); // 0x14067B190
void AgDebugChannelData::setLogger(AgStringRef out); // 0x14067B1C0
void AgConsoleLogger::log(AgLogVerbosity verbosity, const char * text, char * args); // 0x14067AB10
void AgConsoleLogger::logFormatted(const char * text); // 0x14067AFD0
void AgDebuggerLogger::log(AgLogVerbosity verbosity, const char * text, char * args); // 0x14067AC90
void AgDebuggerLogger::logFormatted(const char * text); // 0x14067B030
void AgForwardLogger::log(AgLogVerbosity verbosity, const char * text, char * args); // 0x14067AE70
void AgForwardLogger::flush(); // 0x14067A730
AgFileLogger::AgFileLogger(AgStringRef file, long instaFlush); // 0x140679070
std::map<AgStringKey,AgDebugChannelData * __ptr64,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgDebugChannelData * __ptr64> > >::~map<AgStringKey,AgDebugChannelData * __ptr64,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgDebugChannelData * __ptr64> > >(); // 0x1406791B0
std::map<AgStringKey,AgLogger * __ptr64,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgLogger * __ptr64> > >::~map<AgStringKey,AgLogger * __ptr64,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgLogger * __ptr64> > >(); // 0x1406791F0
std::pair<AgStringKey,AgDebugChannelData * __ptr64>::~pair<AgStringKey,AgDebugChannelData * __ptr64>(); // 0x140679230
void AgFileLogger::log(AgLogVerbosity verbosity, const char * text, char * args); // 0x14067AD80
void AgFileLogger::logFormatted(const char * text); // 0x14067B090
void AgFileLogger::flush(); // 0x14067A6C0
AgLogVerbosity AgLogger::getVerbosityIDByName(AgStringRef name); // 0x14067AA30//decompilation failure at 140A8FF00!
//decompilation failure at 140A8FEE8!
//decompilation failure at 140A8FEFC!
//decompilation failure at 1407406E8!
//decompilation failure at 1407406D8!
//decompilation failure at 140A8FEF0!
//decompilation failure at 140A8FEF8!
//decompilation failure at 140A8FF28!
//decompilation failure at 1407406E0!
//decompilation failure at 140A8FF50!
void __fastcall std::pair<AgStringKey const,AgDebugChannelData *>::pair<AgStringKey const,AgDebugChannelData *>(
        std::pair<AgStringKey const ,AgDebugChannelData *> *this,
        std::pair<AgStringKey,AgDebugChannelData *> *_Right)
{
  AgStringRef v4; // [rsp+28h] [rbp-20h] BYREF

  AgString::AgString(&this->first.m_string, &_Right->first.m_string);
  this->first.m_stringRef = _Right->first.m_stringRef;
  if ( (unsigned int)AgString::getLength(&this->first.m_string) )
  {
    AgStringRef::AgStringRef(&v4, &this->first.m_string);
    this->first.m_stringRef = v4;
  }
  this->second = _Right->second;
}

std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *__fastcall std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::_Buynode<std::pair<AgStringKey,AgDebugChannelData *>>(
        std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgDebugChannelData *> >,0> > *this,
        std::pair<AgStringKey,AgDebugChannelData *> *<_Val_0>)
{
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v3; // rbx

  v3 = std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::_Buynode0(this);
  *(_WORD *)&v3->_Color = 0;
  if ( v3 != (std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *)-32i64 )
    std::pair<AgStringKey const,AgDebugChannelData *>::pair<AgStringKey const,AgDebugChannelData *>(
      &v3->_Myval,
      <_Val_0>);
  return v3;
}

std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *__fastcall std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::_Buynode<std::pair<AgStringRef,AgDebugChannelData *>>(
        std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgDebugChannelData *> >,0> > *this,
        std::pair<AgStringRef,AgDebugChannelData *> *<_Val_0>)
{
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v3; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v4; // rdi
  AgStringRef *p_Myval; // rbx

  v3 = std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::_Buynode0(this);
  v4 = v3;
  *(_WORD *)&v3->_Color = 0;
  p_Myval = (AgStringRef *)&v3->_Myval;
  if ( v3 != (std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *)-32i64 )
  {
    AgString::AgString(&v3->_Myval.first.m_string);
    p_Myval[1] = <_Val_0>->first;
    p_Myval[2].m_text = (const char *)<_Val_0>->second;
  }
  return v4;
}

std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *__fastcall std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>::_Buynode<std::pair<AgStringRef,AgForwardLogger *>>(
        std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgLogger *> >,0> > *this,
        std::pair<AgStringRef,AgForwardLogger *> *<_Val_0>)
{
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v3; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v4; // rdi
  AgStringRef *p_Myval; // rbx

  v3 = std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>::_Buynode0(this);
  v4 = v3;
  *(_WORD *)&v3->_Color = 0;
  p_Myval = (AgStringRef *)&v3->_Myval;
  if ( v3 != (std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *)-32i64 )
  {
    AgString::AgString(&v3->_Myval.first.m_string);
    p_Myval[1] = <_Val_0>->first;
    p_Myval[2].m_text = (const char *)<_Val_0>->second;
  }
  return v4;
}

std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > > *__fastcall std::_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::_Insert_at<std::pair<AgStringKey const,AgDebugChannelData *> &,std::_Tree_node<std::pair<AgStringKey const,AgDebugChannelData *>,void *> *>(
        std::_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgDebugChannelData *> >,0> > *this,
        std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > > *result,
        bool _Addleft,
        std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *_Wherenode,
        std::pair<AgStringKey const ,AgDebugChannelData *> *_Val,
        std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *_Node)
{
  unsigned __int64 Mysize; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *Myhead; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v10; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *Parent; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v12; // r8
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *Left; // rdx
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *Right; // rdx
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v15; // rdx
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v16; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v17; // rdx
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v18; // r8
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v19; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v20; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v21; // rdx
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v22; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v23; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v24; // rcx

  Mysize = this->_Mypair._Myval2._Myval2._Mysize;
  if ( Mysize >= 0x38E38E38E38E38Di64 )
  {
    AgString::~AgString(&_Node->_Myval.first.m_string, (unsigned __int64)result);
    operator delete(_Node);
    std::_Xlength_error("map/set<T> too long");
  }
  this->_Mypair._Myval2._Myval2._Mysize = Mysize + 1;
  _Node->_Parent = _Wherenode;
  if ( _Wherenode == this->_Mypair._Myval2._Myval2._Myhead )
  {
    this->_Mypair._Myval2._Myval2._Myhead->_Parent = _Node;
    this->_Mypair._Myval2._Myval2._Myhead->_Left = _Node;
    Myhead = this->_Mypair._Myval2._Myval2._Myhead;
LABEL_9:
    Myhead->_Right = _Node;
    goto LABEL_10;
  }
  if ( !_Addleft )
  {
    _Wherenode->_Right = _Node;
    Myhead = this->_Mypair._Myval2._Myval2._Myhead;
    if ( _Wherenode != this->_Mypair._Myval2._Myval2._Myhead->_Right )
      goto LABEL_10;
    goto LABEL_9;
  }
  _Wherenode->_Left = _Node;
  if ( _Wherenode == this->_Mypair._Myval2._Myval2._Myhead->_Left )
    this->_Mypair._Myval2._Myval2._Myhead->_Left = _Node;
LABEL_10:
  v10 = _Node;
  while ( !v10->_Parent->_Color )
  {
    Parent = v10->_Parent;
    v12 = Parent->_Parent;
    Left = v12->_Left;
    if ( Parent == v12->_Left )
    {
      Right = v12->_Right;
      if ( Right->_Color )
      {
        if ( v10 == Parent->_Right )
        {
          v10 = v10->_Parent;
          v15 = Parent->_Right;
          Parent->_Right = v15->_Left;
          if ( !v15->_Left->_Isnil )
            v15->_Left->_Parent = Parent;
          v15->_Parent = Parent->_Parent;
          if ( Parent == this->_Mypair._Myval2._Myval2._Myhead->_Parent )
          {
            this->_Mypair._Myval2._Myval2._Myhead->_Parent = v15;
          }
          else
          {
            v16 = Parent->_Parent;
            if ( v10 == v16->_Left )
              v16->_Left = v15;
            else
              v16->_Right = v15;
          }
          v15->_Left = v10;
          v10->_Parent = v15;
        }
        v10->_Parent->_Color = 1;
        v10->_Parent->_Parent->_Color = 0;
        v17 = v10->_Parent->_Parent;
        v18 = v17->_Left;
        v17->_Left = v17->_Left->_Right;
        v19 = v18->_Right;
        if ( !v19->_Isnil )
          v19->_Parent = v17;
        v18->_Parent = v17->_Parent;
        if ( v17 == this->_Mypair._Myval2._Myval2._Myhead->_Parent )
        {
          this->_Mypair._Myval2._Myval2._Myhead->_Parent = v18;
        }
        else
        {
          v20 = v17->_Parent;
          if ( v17 == v20->_Right )
            v20->_Right = v18;
          else
            v20->_Left = v18;
        }
        v18->_Right = v17;
LABEL_50:
        v17->_Parent = v18;
        continue;
      }
      Parent->_Color = 1;
      Right->_Color = 1;
      v10->_Parent->_Parent->_Color = 0;
      v10 = v10->_Parent->_Parent;
    }
    else
    {
      if ( Left->_Color )
      {
        if ( v10 == Parent->_Left )
        {
          v10 = v10->_Parent;
          v21 = Parent->_Left;
          Parent->_Left = Parent->_Left->_Right;
          v22 = v21->_Right;
          if ( !v22->_Isnil )
            v22->_Parent = v10;
          v21->_Parent = v10->_Parent;
          if ( v10 == this->_Mypair._Myval2._Myval2._Myhead->_Parent )
          {
            this->_Mypair._Myval2._Myval2._Myhead->_Parent = v21;
          }
          else
          {
            v23 = v10->_Parent;
            if ( v10 == v23->_Right )
              v23->_Right = v21;
            else
              v23->_Left = v21;
          }
          v21->_Right = v10;
          v10->_Parent = v21;
        }
        v10->_Parent->_Color = 1;
        v10->_Parent->_Parent->_Color = 0;
        v17 = v10->_Parent->_Parent;
        v18 = v17->_Right;
        v17->_Right = v18->_Left;
        if ( !v18->_Left->_Isnil )
          v18->_Left->_Parent = v17;
        v18->_Parent = v17->_Parent;
        if ( v17 == this->_Mypair._Myval2._Myval2._Myhead->_Parent )
        {
          this->_Mypair._Myval2._Myval2._Myhead->_Parent = v18;
        }
        else
        {
          v24 = v17->_Parent;
          if ( v17 == v24->_Left )
            v24->_Left = v18;
          else
            v24->_Right = v18;
        }
        v18->_Left = v17;
        goto LABEL_50;
      }
      Parent->_Color = 1;
      Left->_Color = 1;
      v10->_Parent->_Parent->_Color = 0;
      v10 = v10->_Parent->_Parent;
    }
  }
  this->_Mypair._Myval2._Myval2._Myhead->_Parent->_Color = 1;
  result->_Ptr = _Node;
  return result;
}

std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > > *__fastcall std::_Tree<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>::_Insert_at<std::pair<AgStringKey const,AgLogger *> &,std::_Tree_node<std::pair<AgStringKey const,AgLogger *>,void *> *>(
        std::_Tree<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgLogger *> >,0> > *this,
        std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > > *result,
        bool _Addleft,
        std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *_Wherenode,
        std::pair<AgStringKey const ,AgLogger *> *_Val,
        std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *_Node)
{
  unsigned __int64 Mysize; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *Myhead; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v10; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *Parent; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v12; // r8
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *Left; // rdx
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *Right; // rdx
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v15; // rdx
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v16; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v17; // rdx
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v18; // r8
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v19; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v20; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v21; // rdx
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v22; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v23; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v24; // rcx

  Mysize = this->_Mypair._Myval2._Myval2._Mysize;
  if ( Mysize >= 0x38E38E38E38E38Di64 )
  {
    AgString::~AgString(&_Node->_Myval.first.m_string, (unsigned __int64)result);
    operator delete(_Node);
    std::_Xlength_error("map/set<T> too long");
  }
  this->_Mypair._Myval2._Myval2._Mysize = Mysize + 1;
  _Node->_Parent = _Wherenode;
  if ( _Wherenode == this->_Mypair._Myval2._Myval2._Myhead )
  {
    this->_Mypair._Myval2._Myval2._Myhead->_Parent = _Node;
    this->_Mypair._Myval2._Myval2._Myhead->_Left = _Node;
    Myhead = this->_Mypair._Myval2._Myval2._Myhead;
LABEL_9:
    Myhead->_Right = _Node;
    goto LABEL_10;
  }
  if ( !_Addleft )
  {
    _Wherenode->_Right = _Node;
    Myhead = this->_Mypair._Myval2._Myval2._Myhead;
    if ( _Wherenode != this->_Mypair._Myval2._Myval2._Myhead->_Right )
      goto LABEL_10;
    goto LABEL_9;
  }
  _Wherenode->_Left = _Node;
  if ( _Wherenode == this->_Mypair._Myval2._Myval2._Myhead->_Left )
    this->_Mypair._Myval2._Myval2._Myhead->_Left = _Node;
LABEL_10:
  v10 = _Node;
  while ( !v10->_Parent->_Color )
  {
    Parent = v10->_Parent;
    v12 = Parent->_Parent;
    Left = v12->_Left;
    if ( Parent == v12->_Left )
    {
      Right = v12->_Right;
      if ( Right->_Color )
      {
        if ( v10 == Parent->_Right )
        {
          v10 = v10->_Parent;
          v15 = Parent->_Right;
          Parent->_Right = v15->_Left;
          if ( !v15->_Left->_Isnil )
            v15->_Left->_Parent = Parent;
          v15->_Parent = Parent->_Parent;
          if ( Parent == this->_Mypair._Myval2._Myval2._Myhead->_Parent )
          {
            this->_Mypair._Myval2._Myval2._Myhead->_Parent = v15;
          }
          else
          {
            v16 = Parent->_Parent;
            if ( v10 == v16->_Left )
              v16->_Left = v15;
            else
              v16->_Right = v15;
          }
          v15->_Left = v10;
          v10->_Parent = v15;
        }
        v10->_Parent->_Color = 1;
        v10->_Parent->_Parent->_Color = 0;
        v17 = v10->_Parent->_Parent;
        v18 = v17->_Left;
        v17->_Left = v17->_Left->_Right;
        v19 = v18->_Right;
        if ( !v19->_Isnil )
          v19->_Parent = v17;
        v18->_Parent = v17->_Parent;
        if ( v17 == this->_Mypair._Myval2._Myval2._Myhead->_Parent )
        {
          this->_Mypair._Myval2._Myval2._Myhead->_Parent = v18;
        }
        else
        {
          v20 = v17->_Parent;
          if ( v17 == v20->_Right )
            v20->_Right = v18;
          else
            v20->_Left = v18;
        }
        v18->_Right = v17;
LABEL_50:
        v17->_Parent = v18;
        continue;
      }
      Parent->_Color = 1;
      Right->_Color = 1;
      v10->_Parent->_Parent->_Color = 0;
      v10 = v10->_Parent->_Parent;
    }
    else
    {
      if ( Left->_Color )
      {
        if ( v10 == Parent->_Left )
        {
          v10 = v10->_Parent;
          v21 = Parent->_Left;
          Parent->_Left = Parent->_Left->_Right;
          v22 = v21->_Right;
          if ( !v22->_Isnil )
            v22->_Parent = v10;
          v21->_Parent = v10->_Parent;
          if ( v10 == this->_Mypair._Myval2._Myval2._Myhead->_Parent )
          {
            this->_Mypair._Myval2._Myval2._Myhead->_Parent = v21;
          }
          else
          {
            v23 = v10->_Parent;
            if ( v10 == v23->_Right )
              v23->_Right = v21;
            else
              v23->_Left = v21;
          }
          v21->_Right = v10;
          v10->_Parent = v21;
        }
        v10->_Parent->_Color = 1;
        v10->_Parent->_Parent->_Color = 0;
        v17 = v10->_Parent->_Parent;
        v18 = v17->_Right;
        v17->_Right = v18->_Left;
        if ( !v18->_Left->_Isnil )
          v18->_Left->_Parent = v17;
        v18->_Parent = v17->_Parent;
        if ( v17 == this->_Mypair._Myval2._Myval2._Myhead->_Parent )
        {
          this->_Mypair._Myval2._Myval2._Myhead->_Parent = v18;
        }
        else
        {
          v24 = v17->_Parent;
          if ( v17 == v24->_Left )
            v24->_Left = v18;
          else
            v24->_Right = v18;
        }
        v18->_Left = v17;
        goto LABEL_50;
      }
      Parent->_Color = 1;
      Left->_Color = 1;
      v10->_Parent->_Parent->_Color = 0;
      v10 = v10->_Parent->_Parent;
    }
  }
  this->_Mypair._Myval2._Myval2._Myhead->_Parent->_Color = 1;
  result->_Ptr = _Node;
  return result;
}

std::pair<std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > >,bool> *__fastcall std::_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::_Insert_nohint<std::pair<AgStringKey const,AgDebugChannelData *> &,std::_Tree_node<std::pair<AgStringKey const,AgDebugChannelData *>,void *> *>(
        std::_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgDebugChannelData *> >,0> > *this,
        std::pair<std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > >,bool> *result,
        bool _Leftish,
        std::pair<AgStringKey const ,AgDebugChannelData *> *_Val,
        std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *_Newnode)
{
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *Myhead; // rsi
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *Parent; // rbx
  bool v11; // di
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *Right; // rbx
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v14; // rax
  unsigned __int64 v15; // rdx
  std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > > resulta; // [rsp+40h] [rbp-38h] BYREF

  Myhead = this->_Mypair._Myval2._Myval2._Myhead;
  Parent = this->_Mypair._Myval2._Myval2._Myhead->_Parent;
  v11 = 1;
  while ( !Parent->_Isnil )
  {
    Myhead = Parent;
    if ( _Leftish )
      v11 = !operator<(&Parent->_Myval.first.m_stringRef, &_Val->first.m_stringRef);
    else
      v11 = operator<(&_Val->first.m_stringRef, &Parent->_Myval.first.m_stringRef);
    if ( v11 )
      Parent = Parent->_Left;
    else
      Parent = Parent->_Right;
  }
  Right = Myhead;
  if ( v11 )
  {
    if ( Myhead == this->_Mypair._Myval2._Myval2._Myhead->_Left )
    {
      result->first = (std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > >)std::_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::_Insert_at<std::pair<AgStringKey const,AgDebugChannelData *> &,std::_Tree_node<std::pair<AgStringKey const,AgDebugChannelData *>,void *> *>(this, &resulta, 1, Myhead, _Val, _Newnode)->_Ptr;
      result->second = 1;
      return result;
    }
    if ( Myhead->_Isnil )
    {
      Right = Myhead->_Right;
    }
    else if ( Myhead->_Left->_Isnil )
    {
      while ( 1 )
      {
        v14 = Right->_Parent;
        if ( v14->_Isnil || Right != v14->_Left )
          break;
        Right = Right->_Parent;
      }
      if ( !Right->_Isnil )
        Right = Right->_Parent;
    }
    else
    {
      for ( Right = Myhead->_Left; !Right->_Right->_Isnil; Right = Right->_Right )
        ;
    }
  }
  if ( operator<(&Right->_Myval.first.m_stringRef, &_Val->first.m_stringRef) )
  {
    result->first = (std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > >)std::_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::_Insert_at<std::pair<AgStringKey const,AgDebugChannelData *> &,std::_Tree_node<std::pair<AgStringKey const,AgDebugChannelData *>,void *> *>(this, &resulta, v11, Myhead, _Val, _Newnode)->_Ptr;
    result->second = 1;
  }
  else
  {
    resulta._Ptr = (std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *)&_Newnode->_Myval;
    AgString::~AgString(&_Newnode->_Myval.first.m_string, v15);
    operator delete(_Newnode);
    result->first._Ptr = Right;
    result->second = 0;
  }
  return result;
}

std::pair<std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > >,bool> *__fastcall std::_Tree<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>::_Insert_nohint<std::pair<AgStringKey const,AgLogger *> &,std::_Tree_node<std::pair<AgStringKey const,AgLogger *>,void *> *>(
        std::_Tree<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgLogger *> >,0> > *this,
        std::pair<std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > >,bool> *result,
        bool _Leftish,
        std::pair<AgStringKey const ,AgLogger *> *_Val,
        std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *_Newnode)
{
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *Myhead; // rsi
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *Parent; // rbx
  bool v11; // di
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *Right; // rbx
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v14; // rax
  unsigned __int64 v15; // rdx
  std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > > resulta; // [rsp+40h] [rbp-38h] BYREF

  Myhead = this->_Mypair._Myval2._Myval2._Myhead;
  Parent = this->_Mypair._Myval2._Myval2._Myhead->_Parent;
  v11 = 1;
  while ( !Parent->_Isnil )
  {
    Myhead = Parent;
    if ( _Leftish )
      v11 = !operator<(&Parent->_Myval.first.m_stringRef, &_Val->first.m_stringRef);
    else
      v11 = operator<(&_Val->first.m_stringRef, &Parent->_Myval.first.m_stringRef);
    if ( v11 )
      Parent = Parent->_Left;
    else
      Parent = Parent->_Right;
  }
  Right = Myhead;
  if ( v11 )
  {
    if ( Myhead == this->_Mypair._Myval2._Myval2._Myhead->_Left )
    {
      result->first = (std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > >)std::_Tree<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>::_Insert_at<std::pair<AgStringKey const,AgLogger *> &,std::_Tree_node<std::pair<AgStringKey const,AgLogger *>,void *> *>(this, &resulta, 1, Myhead, _Val, _Newnode)->_Ptr;
      result->second = 1;
      return result;
    }
    if ( Myhead->_Isnil )
    {
      Right = Myhead->_Right;
    }
    else if ( Myhead->_Left->_Isnil )
    {
      while ( 1 )
      {
        v14 = Right->_Parent;
        if ( v14->_Isnil || Right != v14->_Left )
          break;
        Right = Right->_Parent;
      }
      if ( !Right->_Isnil )
        Right = Right->_Parent;
    }
    else
    {
      for ( Right = Myhead->_Left; !Right->_Right->_Isnil; Right = Right->_Right )
        ;
    }
  }
  if ( operator<(&Right->_Myval.first.m_stringRef, &_Val->first.m_stringRef) )
  {
    result->first = (std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > >)std::_Tree<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>::_Insert_at<std::pair<AgStringKey const,AgLogger *> &,std::_Tree_node<std::pair<AgStringKey const,AgLogger *>,void *> *>(this, &resulta, v11, Myhead, _Val, _Newnode)->_Ptr;
    result->second = 1;
  }
  else
  {
    resulta._Ptr = (std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *)&_Newnode->_Myval;
    AgString::~AgString(&_Newnode->_Myval.first.m_string, v15);
    operator delete(_Newnode);
    result->first._Ptr = Right;
    result->second = 0;
  }
  return result;
}

std::pair<AgStringKey,AgDebugChannelData *> *__fastcall std::make_pair<AgStringKey,AgDebugChannelData *>(
        std::pair<AgStringKey,AgDebugChannelData *> *result,
        AgStringKey *_Val1,
        AgDebugChannelData **_Val2)
{
  AgStringRef v7; // [rsp+30h] [rbp-18h] BYREF

  AgString::AgString(&result->first.m_string, &_Val1->m_string);
  result->first.m_stringRef = _Val1->m_stringRef;
  if ( (unsigned int)AgString::getLength(&result->first.m_string) )
  {
    AgStringRef::AgStringRef(&v7, &result->first.m_string);
    result->first.m_stringRef = v7;
  }
  result->second = *_Val2;
  return result;
}

void __fastcall AgDebugChannels::AgDebugChannels(AgDebugChannels *this)
{
  InitializeCriticalSection((LPCRITICAL_SECTION)this);
  this->m_channels._Mypair._Myval2._Myval2._Myhead = 0i64;
  this->m_channels._Mypair._Myval2._Myval2._Mysize = 0i64;
  this->m_channels._Mypair._Myval2._Myval2._Myhead = std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::_Buyheadnode(&this->m_channels);
  this->m_loggers._Mypair._Myval2._Myval2._Myhead = 0i64;
  this->m_loggers._Mypair._Myval2._Myval2._Mysize = 0i64;
  this->m_loggers._Mypair._Myval2._Myval2._Myhead = std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>::_Buyheadnode(&this->m_loggers);
}

void __fastcall AgFileLogger::AgFileLogger(AgFileLogger *this, AgStringRef *file, int instaFlush)
{
  const char *CString; // rax

  this->__vftable = (AgFileLogger_vtbl *)&AgLogger::`vftable';
  this->__vftable = (AgFileLogger_vtbl *)&AgFileLogger::`vftable';
  InitializeCriticalSection((LPCRITICAL_SECTION)&this->m_logMutex);
  this->m_instaFlush = instaFlush;
  CString = (const char *)AgStringRef::getCString((std::shared_ptr<__ExceptionPtr> *)file);
  this->m_logFile = fopen(CString, "w");
}

void __fastcall std::_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::~_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>(
        std::_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgDebugChannelData *> >,0> > *this)
{
  std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > > result; // [rsp+48h] [rbp+10h] BYREF

  std::_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::erase(
    this,
    &result,
    (std::_Tree_const_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > >)this->_Mypair._Myval2._Myval2._Myhead->_Left,
    (std::_Tree_const_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > >)this->_Mypair._Myval2._Myval2._Myhead);
  operator delete(this->_Mypair._Myval2._Myval2._Myhead);
}

void __fastcall std::_Tree<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>::~_Tree<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>(
        std::_Tree<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgLogger *> >,0> > *this)
{
  std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > > result; // [rsp+48h] [rbp+10h] BYREF

  std::_Tree<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>::erase(
    this,
    &result,
    (std::_Tree_const_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > >)this->_Mypair._Myval2._Myval2._Myhead->_Left,
    (std::_Tree_const_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > >)this->_Mypair._Myval2._Myval2._Myhead);
  operator delete(this->_Mypair._Myval2._Myval2._Myhead);
}

void __fastcall std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::~_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>(
        std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgDebugChannelData *> >,0> > *this)
{
  operator delete(this->_Mypair._Myval2._Myval2._Myhead);
}

void __fastcall std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>::~_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>(
        std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgLogger *> >,0> > *this)
{
  operator delete(this->_Mypair._Myval2._Myval2._Myhead);
}

void __fastcall std::map<AgStringKey,AgDebugChannelData *>::~map<AgStringKey,AgDebugChannelData *>(
        std::map<AgStringKey,AgDebugChannelData *> *this)
{
  std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > > result; // [rsp+48h] [rbp+10h] BYREF

  std::_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::erase(
    this,
    &result,
    (std::_Tree_const_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > >)this->_Mypair._Myval2._Myval2._Myhead->_Left,
    (std::_Tree_const_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > >)this->_Mypair._Myval2._Myval2._Myhead);
  operator delete(this->_Mypair._Myval2._Myval2._Myhead);
}

void __fastcall std::map<AgStringKey,AgLogger *>::~map<AgStringKey,AgLogger *>(std::map<AgStringKey,AgLogger *> *this)
{
  std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > > result; // [rsp+48h] [rbp+10h] BYREF

  std::_Tree<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>::erase(
    this,
    &result,
    (std::_Tree_const_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > >)this->_Mypair._Myval2._Myval2._Myhead->_Left,
    (std::_Tree_const_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > >)this->_Mypair._Myval2._Myval2._Myhead);
  operator delete(this->_Mypair._Myval2._Myval2._Myhead);
}

void __fastcall std::pair<AgStringKey,AgDebugChannelData *>::~pair<AgStringKey,AgDebugChannelData *>(
        std::pair<AgStringKey,AgDebugChannelData *> *this,
        unsigned __int64 a2)
{
  AgString::~AgString(&this->first.m_string, a2);
}

void __fastcall std::vector<AgLogger *>::~vector<AgLogger *>(std::vector<AgLogger *> *this)
{
  if ( this->_Mypair._Myval2._Myfirst )
  {
    std::_Wrap_alloc<std::allocator<OGLShader *>>::deallocate(
      (std::allocator<AgLogger *> *)this,
      this->_Mypair._Myval2._Myfirst,
      this->_Mypair._Myval2._Myend - this->_Mypair._Myval2._Myfirst);
    this->_Mypair._Myval2._Myfirst = 0i64;
    this->_Mypair._Myval2._Mylast = 0i64;
    this->_Mypair._Myval2._Myend = 0i64;
  }
}

void __fastcall std::vector<AgString>::~vector<AgString>(std::vector<AgString> *this)
{
  std::vector<AgString>::_Tidy(this);
}

void __fastcall AgForwardLogger::~AgForwardLogger(AgForwardLogger *this)
{
  AgLogger **Myfirst; // rdx

  this->__vftable = (AgForwardLogger_vtbl *)&AgForwardLogger::`vftable';
  std::vector<AgString>::_Tidy(&this->m_lateBindTargets);
  Myfirst = this->m_targets._Mypair._Myval2._Myfirst;
  if ( Myfirst )
  {
    std::_Wrap_alloc<std::allocator<OGLShader *>>::deallocate(
      (std::allocator<AgLogger *> *)&this->m_targets,
      Myfirst,
      this->m_targets._Mypair._Myval2._Myend - Myfirst);
    this->m_targets._Mypair._Myval2._Myfirst = 0i64;
    this->m_targets._Mypair._Myval2._Mylast = 0i64;
    this->m_targets._Mypair._Myval2._Myend = 0i64;
  }
  this->__vftable = (AgForwardLogger_vtbl *)&AgLogger::`vftable';
}

void __fastcall AgLogger::~AgLogger(AgLogger *this)
{
  this->__vftable = (AgLogger_vtbl *)&AgLogger::`vftable';
}

std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *__fastcall std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::_Buyheadnode(
        std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgDebugChannelData *> >,0> > *this)
{
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *result; // rax

  result = (std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *)operator new(0x48ui64);
  if ( !result )
    invalid_parameter_noinfo_noreturn();
  result->_Left = result;
  if ( result != (std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *)-8i64 )
    result->_Parent = result;
  if ( result != (std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *)-16i64 )
    result->_Right = result;
  *(_WORD *)&result->_Color = 257;
  return result;
}

std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *__fastcall std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>::_Buyheadnode(
        std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgLogger *> >,0> > *this)
{
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *result; // rax

  result = (std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *)operator new(0x48ui64);
  if ( !result )
    invalid_parameter_noinfo_noreturn();
  result->_Left = result;
  if ( result != (std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *)-8i64 )
    result->_Parent = result;
  if ( result != (std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *)-16i64 )
    result->_Right = result;
  *(_WORD *)&result->_Color = 257;
  return result;
}

std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> **__fastcall std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::_Buynode0(
        std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgDebugChannelData *> >,0> > *this)
{
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> **v2; // rdx

  v2 = (std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> **)operator new(0x48ui64);
  if ( !v2 )
    invalid_parameter_noinfo_noreturn();
  *v2 = this->_Mypair._Myval2._Myval2._Myhead;
  if ( v2 != (std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> **)-8i64 )
    v2[1] = this->_Mypair._Myval2._Myval2._Myhead;
  if ( v2 != (std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> **)-16i64 )
    v2[2] = this->_Mypair._Myval2._Myval2._Myhead;
  return v2;
}

std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> **__fastcall std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>::_Buynode0(
        std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgLogger *> >,0> > *this)
{
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> **v2; // rdx

  v2 = (std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> **)operator new(0x48ui64);
  if ( !v2 )
    invalid_parameter_noinfo_noreturn();
  *v2 = this->_Mypair._Myval2._Myval2._Myhead;
  if ( v2 != (std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> **)-8i64 )
    v2[1] = this->_Mypair._Myval2._Myval2._Myhead;
  if ( v2 != (std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> **)-16i64 )
    v2[2] = this->_Mypair._Myval2._Myval2._Myhead;
  return v2;
}

void __fastcall std::_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::_Destroy_if_not_nil(
        std::_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgDebugChannelData *> >,0> > *this,
        std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *_Newnode)
{
  AgString::~AgString(&_Newnode->_Myval.first.m_string, (unsigned __int64)_Newnode);
  operator delete(_Newnode);
}

void __fastcall std::_Tree<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>::_Destroy_if_not_nil(
        std::_Tree<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgLogger *> >,0> > *this,
        std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *_Newnode)
{
  AgString::~AgString(&_Newnode->_Myval.first.m_string, (unsigned __int64)_Newnode);
  operator delete(_Newnode);
}

void __fastcall std::_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::_Erase(
        std::_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgDebugChannelData *> >,0> > *this,
        std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *_Rootnode)
{
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v2; // rdi
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *i; // rbx
  unsigned __int64 v5; // rdx

  v2 = _Rootnode;
  for ( i = _Rootnode; !i->_Isnil; v2 = i )
  {
    std::_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::_Erase(
      this,
      i->_Right);
    i = i->_Left;
    AgString::~AgString(&v2->_Myval.first.m_string, v5);
    operator delete(v2);
  }
}

void __fastcall std::_Tree<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>::_Erase(
        std::_Tree<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgLogger *> >,0> > *this,
        std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *_Rootnode)
{
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v2; // rdi
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *i; // rbx
  unsigned __int64 v5; // rdx

  v2 = _Rootnode;
  for ( i = _Rootnode; !i->_Isnil; v2 = i )
  {
    std::_Tree<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>::_Erase(
      this,
      i->_Right);
    i = i->_Left;
    AgString::~AgString(&v2->_Myval.first.m_string, v5);
    operator delete(v2);
  }
}

void __fastcall std::_Tree<std::_Tmap_traits<AgControllerUID,FighterOperationMapper,std::less<AgControllerUID>,std::allocator<std::pair<AgControllerUID const,FighterOperationMapper>>,0>>::_Lrotate(
        std::_Tree<std::_Tmap_traits<AgStringRef,AgJsonNode,std::less<AgStringRef>,std::allocator<std::pair<AgStringRef const ,AgJsonNode> >,0> > *this,
        std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *_Wherenode)
{
  std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *Right; // r8
  std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *Parent; // rax

  Right = _Wherenode->_Right;
  _Wherenode->_Right = Right->_Left;
  if ( !Right->_Left->_Isnil )
    Right->_Left->_Parent = _Wherenode;
  Right->_Parent = _Wherenode->_Parent;
  if ( _Wherenode == this->_Mypair._Myval2._Myval2._Myhead->_Parent )
  {
    this->_Mypair._Myval2._Myval2._Myhead->_Parent = Right;
    Right->_Left = _Wherenode;
    _Wherenode->_Parent = Right;
  }
  else
  {
    Parent = _Wherenode->_Parent;
    if ( _Wherenode == Parent->_Left )
      Parent->_Left = Right;
    else
      Parent->_Right = Right;
    Right->_Left = _Wherenode;
    _Wherenode->_Parent = Right;
  }
}

void __fastcall std::vector<AgLogger *>::_Reallocate(std::vector<AgLogger *> *this, unsigned __int64 _Count)
{
  AgLogger **v4; // rsi
  signed __int64 v5; // rdi

  v4 = std::allocator<AgServiceCommandBase *>::allocate((std::allocator<AgLogger *> *)this, _Count);
  memmove(
    v4,
    this->_Mypair._Myval2._Myfirst,
    (char *)this->_Mypair._Myval2._Mylast - (char *)this->_Mypair._Myval2._Myfirst);
  v5 = this->_Mypair._Myval2._Mylast - this->_Mypair._Myval2._Myfirst;
  if ( this->_Mypair._Myval2._Myfirst )
    std::_Wrap_alloc<std::allocator<OGLShader *>>::deallocate(
      (std::allocator<AgLogger *> *)this,
      this->_Mypair._Myval2._Myfirst,
      this->_Mypair._Myval2._Myend - this->_Mypair._Myval2._Myfirst);
  this->_Mypair._Myval2._Myend = &v4[_Count];
  this->_Mypair._Myval2._Mylast = &v4[v5];
  this->_Mypair._Myval2._Myfirst = v4;
}

void __fastcall std::vector<AgLogger *>::_Reserve(std::vector<AgLogger *> *this, unsigned __int64 _Count)
{
  AgLogger **Myend; // r10
  AgLogger **Mylast; // r8
  AgLogger **Myfirst; // rcx
  __int64 v6; // r8
  unsigned __int64 v7; // rdx
  unsigned __int64 v8; // r10
  unsigned __int64 v9; // rcx

  Myend = this->_Mypair._Myval2._Myend;
  Mylast = this->_Mypair._Myval2._Mylast;
  if ( Myend - Mylast < _Count )
  {
    Myfirst = this->_Mypair._Myval2._Myfirst;
    v6 = Mylast - Myfirst;
    if ( 0x1FFFFFFFFFFFFFFFi64 - v6 < _Count )
      std::_Xlength_error("vector<T> too long");
    v7 = v6 + _Count;
    v8 = Myend - Myfirst;
    v9 = 0i64;
    if ( 0x1FFFFFFFFFFFFFFFi64 - (v8 >> 1) >= v8 )
      v9 = v8 + (v8 >> 1);
    if ( v9 >= v7 )
      v7 = v9;
    std::vector<AgLogger *>::_Reallocate(this, v7);
  }
}

void __fastcall std::_Tree<std::_Tmap_traits<enum AgControllerComponentType,std::list<AgControllerComponent *>,std::less<enum AgControllerComponentType>,std::allocator<std::pair<enum AgControllerComponentType const,std::list<AgControllerComponent *>>>,0>>::_Rrotate(
        std::_Tree<std::_Tmap_traits<AgStringRef,AgJsonNode,std::less<AgStringRef>,std::allocator<std::pair<AgStringRef const ,AgJsonNode> >,0> > *this,
        std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *_Wherenode)
{
  std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *Left; // r8
  std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *Right; // rax
  std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *Parent; // rax

  Left = _Wherenode->_Left;
  _Wherenode->_Left = _Wherenode->_Left->_Right;
  Right = Left->_Right;
  if ( !Right->_Isnil )
    Right->_Parent = _Wherenode;
  Left->_Parent = _Wherenode->_Parent;
  if ( _Wherenode == this->_Mypair._Myval2._Myval2._Myhead->_Parent )
  {
    this->_Mypair._Myval2._Myval2._Myhead->_Parent = Left;
    Left->_Right = _Wherenode;
    _Wherenode->_Parent = Left;
  }
  else
  {
    Parent = _Wherenode->_Parent;
    if ( _Wherenode == Parent->_Right )
      Parent->_Right = Left;
    else
      Parent->_Left = Left;
    Left->_Right = _Wherenode;
    _Wherenode->_Parent = Left;
  }
}

void __fastcall std::vector<AgString>::_Tidy(std::vector<AgString> *this, unsigned __int64 a2)
{
  AgString *Myfirst; // rbx
  AgString *i; // rdi

  Myfirst = this->_Mypair._Myval2._Myfirst;
  if ( this->_Mypair._Myval2._Myfirst )
  {
    for ( i = this->_Mypair._Myval2._Mylast; Myfirst != i; ++Myfirst )
      AgString::~AgString(Myfirst, a2);
    std::_Wrap_alloc<std::allocator<AgDelegate1<AgSuspendingEvent const &,void>>>::deallocate(
      (std::_Wrap_alloc<std::allocator<AgDelegate1<AgUserUpdatedEvent const &,void> > > *)this,
      (AgDelegate1<AgUserUpdatedEvent const &,void> *)this->_Mypair._Myval2._Myfirst,
      this->_Mypair._Myval2._Myend - this->_Mypair._Myval2._Myfirst);
    this->_Mypair._Myval2._Myfirst = 0i64;
    this->_Mypair._Myval2._Mylast = 0i64;
    this->_Mypair._Myval2._Myend = 0i64;
  }
}

void __fastcall AgDebugChannels::_initDefaultLoggers(AgDebugChannels *this)
{
  AgLogger *v2; // rax
  AgForwardLogger *v3; // rbx
  char *v4; // rsi
  AgStringRef *v5; // rax
  const char *CString; // rax
  char *v7; // rax
  AgLogger *v8; // rsi
  char *v9; // rax
  AgLogger *v10; // rsi
  AgStringRef *v11; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *_Newnode; // rax
  std::pair<AgStringRef,AgForwardLogger *> v13; // [rsp+40h] [rbp-48h] BYREF
  AgStringRef v14; // [rsp+60h] [rbp-28h] BYREF
  AgLogger *_Val; // [rsp+90h] [rbp+8h] BYREF

  v2 = (AgLogger *)operator new(0x38ui64);
  v3 = (AgForwardLogger *)v2;
  _Val = v2;
  if ( v2 )
  {
    v2->__vftable = (AgLogger_vtbl *)&AgLogger::`vftable';
    v2->__vftable = (AgLogger_vtbl *)&AgForwardLogger::`vftable';
    v2[1].__vftable = 0i64;
    v2[2].__vftable = 0i64;
    v2[3].__vftable = 0i64;
    v2[4].__vftable = 0i64;
    v2[5].__vftable = 0i64;
    v2[6].__vftable = 0i64;
  }
  else
  {
    v3 = 0i64;
  }
  v4 = (char *)operator new(0x40ui64);
  _Val = (AgLogger *)v4;
  if ( v4 )
  {
    AgStringRef::AgStringRef(&v14, "debug.log");
    v13.first = *v5;
    *(_QWORD *)v4 = &AgLogger::`vftable';
    *(_QWORD *)v4 = &AgFileLogger::`vftable';
    InitializeCriticalSection((LPCRITICAL_SECTION)(v4 + 8));
    *((_DWORD *)v4 + 12) = 1;
    CString = (const char *)AgStringRef::getCString((std::shared_ptr<__ExceptionPtr> *)&v13);
    *((_QWORD *)v4 + 7) = fopen(CString, "w");
  }
  else
  {
    v4 = 0i64;
  }
  _Val = (AgLogger *)v4;
  std::vector<AgLogger *>::push_back(&v3->m_targets, &_Val);
  v7 = (char *)operator new(0x30ui64);
  v8 = (AgLogger *)v7;
  _Val = (AgLogger *)v7;
  if ( v7 )
  {
    *(_QWORD *)v7 = &AgLogger::`vftable';
    *(_QWORD *)v7 = &AgConsoleLogger::`vftable';
    InitializeCriticalSection((LPCRITICAL_SECTION)(v7 + 8));
  }
  else
  {
    v8 = 0i64;
  }
  _Val = v8;
  std::vector<AgLogger *>::push_back(&v3->m_targets, &_Val);
  if ( IsDebuggerPresent() )
  {
    v9 = (char *)operator new(0x30ui64);
    v10 = (AgLogger *)v9;
    _Val = (AgLogger *)v9;
    if ( v9 )
    {
      *(_QWORD *)v9 = &AgLogger::`vftable';
      *(_QWORD *)v9 = &AgDebuggerLogger::`vftable';
      InitializeCriticalSection((LPCRITICAL_SECTION)(v9 + 8));
    }
    else
    {
      v10 = 0i64;
    }
    _Val = v10;
    std::vector<AgLogger *>::push_back(&v3->m_targets, &_Val);
  }
  AgStringRef::AgStringRef(&v14, "TraceLogger");
  v13.first = *v11;
  v13.second = v3;
  _Newnode = std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>::_Buynode<std::pair<AgStringRef,AgForwardLogger *>>(
               &this->m_loggers,
               &v13);
  std::_Tree<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>::_Insert_nohint<std::pair<AgStringKey const,AgLogger *> &,std::_Tree_node<std::pair<AgStringKey const,AgLogger *>,void *> *>(
    &this->m_loggers,
    (std::pair<std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > >,bool> *)&v13,
    0,
    &_Newnode->_Myval,
    _Newnode);
}

void __fastcall AgDebugChannels::_initRootChannel(AgDebugChannels *this)
{
  AgDebugChannelData *v2; // rbx
  AgStringRef *v3; // rax
  AgStringRef *v4; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *_Newnode; // rax
  AgStringRef *v6; // rax
  AgStringRef v7; // xmm0
  AgDebugChannelData *v8; // rcx
  std::pair<AgStringRef,AgDebugChannelData *> copy; // [rsp+40h] [rbp-48h] BYREF
  AgStringRef v10; // [rsp+60h] [rbp-28h] BYREF
  AgStringRef v11; // [rsp+70h] [rbp-18h] BYREF

  v2 = (AgDebugChannelData *)operator new(0x28ui64);
  if ( v2 )
  {
    AgStringRef::AgStringRef(&v10, "Root");
    copy.first = *v3;
    v2->m_parent = 0i64;
    AgString::AgString(&v2->m_name, &copy.first);
    v2->m_config.m_enabled = -1;
    v2->m_config.m_verbosity = AgLogVerbosity_Inherit;
    v2->m_logger = 0i64;
  }
  else
  {
    v2 = 0i64;
  }
  AgStringRef::AgStringRef(&v11, "Root");
  copy.first = *v4;
  copy.second = v2;
  _Newnode = std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::_Buynode<std::pair<AgStringRef,AgDebugChannelData *>>(
               &this->m_channels,
               &copy);
  std::_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::_Insert_nohint<std::pair<AgStringKey const,AgDebugChannelData *> &,std::_Tree_node<std::pair<AgStringKey const,AgDebugChannelData *>,void *> *>(
    &this->m_channels,
    (std::pair<std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > >,bool> *)&copy,
    0,
    &_Newnode->_Myval,
    _Newnode);
  rootChannel = (AgDebugChannelData *)*((_QWORD *)copy.first.m_text + 8);
  AgStringRef::AgStringRef(&v11, "TraceLogger");
  v7 = *v6;
  v8 = rootChannel;
  rootChannel->m_config.m_enabled = 1;
  v8->m_config.m_verbosity = AgLogVerbosity_Info;
  copy.first = v7;
  AgDebugChannelData::setLogger(v8, &copy.first);
}

AgLogger **__fastcall std::allocator<AgServiceCommandBase *>::allocate(
        std::allocator<AgLogger *> *this,
        unsigned __int64 _Count)
{
  AgLogger **result; // rax
  unsigned __int64 v3; // rcx
  AgLogger *v4; // rax
  AgLogger *v5; // rcx

  if ( !_Count )
    return 0i64;
  if ( _Count > 0x1FFFFFFFFFFFFFFFi64 )
    std::_Xbad_alloc();
  v3 = 8 * _Count;
  if ( 8 * _Count < 0x1000 )
  {
    result = (AgLogger **)operator new(v3);
    if ( !result )
      invalid_parameter_noinfo_noreturn();
  }
  else
  {
    if ( v3 + 39 <= v3 )
      std::_Xbad_alloc();
    v4 = (AgLogger *)operator new(v3 + 39);
    v5 = v4;
    if ( !v4 )
      invalid_parameter_noinfo_noreturn();
    result = (AgLogger **)(((unsigned __int64)&v4[4].__vftable + 7) & 0xFFFFFFFFFFFFFFE0ui64);
    *(result - 1) = v5;
  }
  return result;
}

void __fastcall std::_Wrap_alloc<std::allocator<OGLShader *>>::deallocate(
        std::allocator<AgLogger *> *this,
        AgLogger **_Ptr,
        unsigned __int64 _Count)
{
  AgLogger **v3; // rax
  char *v4; // rdx

  if ( _Count > 0x1FFFFFFFFFFFFFFFi64 )
    invalid_parameter_noinfo_noreturn();
  if ( 8 * _Count >= 0x1000 )
  {
    if ( ((unsigned __int8)_Ptr & 0x1F) != 0 )
      invalid_parameter_noinfo_noreturn();
    v3 = (AgLogger **)*(_Ptr - 1);
    if ( v3 >= _Ptr )
      invalid_parameter_noinfo_noreturn();
    v4 = (char *)((char *)_Ptr - (char *)v3);
    if ( (unsigned __int64)v4 < 8 )
      invalid_parameter_noinfo_noreturn();
    if ( (unsigned __int64)v4 > 0x27 )
      invalid_parameter_noinfo_noreturn();
    _Ptr = v3;
  }
  operator delete(_Ptr);
}

std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > > *__fastcall std::_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::erase(
        std::_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgDebugChannelData *> >,0> > *this,
        std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > > *result,
        std::_Tree_const_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > > _First,
        std::_Tree_const_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > > _Last)
{
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *Myhead; // rdx
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v7; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *Left; // rcx
  std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > > *v9; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v10; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *Right; // rdx
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *j; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *i; // rcx
  std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > > resulta; // [rsp+30h] [rbp+8h] BYREF
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v15; // [rsp+40h] [rbp+18h]
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *Ptr; // [rsp+48h] [rbp+20h]

  Ptr = _Last._Ptr;
  v15 = _First._Ptr;
  Myhead = this->_Mypair._Myval2._Myval2._Myhead;
  if ( _First._Ptr == this->_Mypair._Myval2._Myval2._Myhead->_Left && _Last._Ptr == Myhead )
  {
    std::_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::_Erase(
      this,
      Myhead->_Parent);
    this->_Mypair._Myval2._Myval2._Myhead->_Parent = this->_Mypair._Myval2._Myval2._Myhead;
    this->_Mypair._Myval2._Myval2._Myhead->_Left = this->_Mypair._Myval2._Myval2._Myhead;
    this->_Mypair._Myval2._Myval2._Myhead->_Right = this->_Mypair._Myval2._Myval2._Myhead;
    v7 = this->_Mypair._Myval2._Myval2._Myhead;
    this->_Mypair._Myval2._Myval2._Mysize = 0i64;
    Left = v7->_Left;
    v9 = result;
    result->_Ptr = Left;
  }
  else
  {
    if ( _First._Ptr != _Last._Ptr )
    {
      do
      {
        v10 = _First._Ptr;
        if ( !_First._Ptr->_Isnil )
        {
          Right = _First._Ptr->_Right;
          if ( Right->_Isnil )
          {
            for ( i = _First._Ptr->_Parent; !i->_Isnil; i = i->_Parent )
            {
              if ( _First._Ptr != i->_Right )
                break;
              v15 = i;
              _First._Ptr = i;
            }
            v15 = i;
          }
          else
          {
            for ( j = Right->_Left; !j->_Isnil; j = j->_Left )
              Right = j;
            v15 = Right;
          }
        }
        std::_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::erase(
          this,
          &resulta,
          (std::_Tree_const_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > >)v10);
        _First._Ptr = v15;
      }
      while ( v15 != Ptr );
    }
    v9 = result;
    result->_Ptr = _First._Ptr;
  }
  return v9;
}

std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > > *__fastcall std::_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::erase(
        std::_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgDebugChannelData *> >,0> > *this,
        std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > > *result,
        std::_Tree_const_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > > _Where)
{
  std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > > *v3; // r15
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v5; // rsi
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *Right; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *j; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *i; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *Left; // rdi
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *Parent; // rbx
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v11; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *k; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v13; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *m; // rax
  std::_Tree_const_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > > *v15; // rax
  char Color; // cl
  bool n; // zf
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v18; // r8
  std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *v19; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v20; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v21; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v22; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v23; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *v24; // rax
  unsigned __int64 Mysize; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *Ptr; // [rsp+60h] [rbp+18h]

  Ptr = _Where._Ptr;
  v3 = result;
  v5 = _Where._Ptr;
  if ( !_Where._Ptr->_Isnil )
  {
    Right = _Where._Ptr->_Right;
    if ( Right->_Isnil )
    {
      for ( i = _Where._Ptr->_Parent; !i->_Isnil; i = i->_Parent )
      {
        if ( _Where._Ptr != i->_Right )
          break;
        _Where._Ptr = i;
      }
      _Where._Ptr = i;
      Ptr = i;
    }
    else
    {
      _Where._Ptr = _Where._Ptr->_Right;
      for ( j = Right->_Left; !j->_Isnil; j = j->_Left )
        _Where._Ptr = j;
      Ptr = _Where._Ptr;
    }
  }
  if ( v5->_Left->_Isnil )
  {
    Left = v5->_Right;
  }
  else if ( v5->_Right->_Isnil )
  {
    Left = v5->_Left;
  }
  else
  {
    Left = _Where._Ptr->_Right;
    if ( _Where._Ptr != v5 )
    {
      v5->_Left->_Parent = _Where._Ptr;
      _Where._Ptr->_Left = v5->_Left;
      if ( _Where._Ptr == v5->_Right )
      {
        Parent = _Where._Ptr;
      }
      else
      {
        Parent = _Where._Ptr->_Parent;
        if ( !Left->_Isnil )
          Left->_Parent = Parent;
        Parent->_Left = Left;
        _Where._Ptr->_Right = v5->_Right;
        v5->_Right->_Parent = _Where._Ptr;
      }
      if ( this->_Mypair._Myval2._Myval2._Myhead->_Parent == v5 )
      {
        this->_Mypair._Myval2._Myval2._Myhead->_Parent = _Where._Ptr;
      }
      else
      {
        v15 = (std::_Tree_const_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > > *)v5->_Parent;
        if ( v15->_Ptr == v5 )
          v15->_Ptr = _Where._Ptr;
        else
          v15[2]._Ptr = _Where._Ptr;
      }
      _Where._Ptr->_Parent = v5->_Parent;
      Color = _Where._Ptr->_Color;
      _Where._Ptr->_Color = v5->_Color;
      v5->_Color = Color;
      goto LABEL_45;
    }
  }
  Parent = v5->_Parent;
  if ( !Left->_Isnil )
    Left->_Parent = Parent;
  if ( this->_Mypair._Myval2._Myval2._Myhead->_Parent == v5 )
  {
    this->_Mypair._Myval2._Myval2._Myhead->_Parent = Left;
  }
  else if ( Parent->_Left == v5 )
  {
    Parent->_Left = Left;
  }
  else
  {
    Parent->_Right = Left;
  }
  if ( this->_Mypair._Myval2._Myval2._Myhead->_Left == v5 )
  {
    if ( Left->_Isnil )
    {
      v11 = Parent;
    }
    else
    {
      v11 = Left;
      for ( k = Left->_Left; !k->_Isnil; k = k->_Left )
        v11 = k;
    }
    this->_Mypair._Myval2._Myval2._Myhead->_Left = v11;
  }
  result = (std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > > *)this->_Mypair._Myval2._Myval2._Myhead;
  if ( this->_Mypair._Myval2._Myval2._Myhead->_Right == v5 )
  {
    if ( Left->_Isnil )
    {
      v13 = Parent;
    }
    else
    {
      v13 = Left;
      for ( m = Left->_Right; !m->_Isnil; m = m->_Right )
        v13 = m;
    }
    result[2]._Ptr = v13;
  }
LABEL_45:
  if ( v5->_Color != 1 )
    goto LABEL_84;
  for ( n = Left == this->_Mypair._Myval2._Myval2._Myhead->_Parent;
        !n;
        n = result == (std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > > *)this->_Mypair._Myval2._Myval2._Myhead->_Parent )
  {
    result = (std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > > *)Parent;
    v18 = Parent;
    if ( Left->_Color != 1 )
      break;
    v19 = (std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *)Parent->_Left;
    if ( Left == Parent->_Left )
    {
      v19 = (std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *)Parent->_Right;
      if ( !v19->_Color )
      {
        v19->_Color = 1;
        Parent->_Color = 0;
        v20 = Parent->_Right;
        Parent->_Right = v20->_Left;
        if ( !v20->_Left->_Isnil )
          v20->_Left->_Parent = Parent;
        v20->_Parent = Parent->_Parent;
        if ( Parent == this->_Mypair._Myval2._Myval2._Myhead->_Parent )
        {
          this->_Mypair._Myval2._Myval2._Myhead->_Parent = v20;
        }
        else
        {
          v21 = Parent->_Parent;
          if ( Parent == v21->_Left )
            v21->_Left = v20;
          else
            v21->_Right = v20;
        }
        v20->_Left = Parent;
        Parent->_Parent = v20;
        v19 = (std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *)Parent->_Right;
      }
      if ( !v19->_Isnil )
      {
        if ( v19->_Left->_Color != 1 || v19->_Right->_Color != 1 )
        {
          if ( v19->_Right->_Color == 1 )
          {
            v19->_Left->_Color = 1;
            v19->_Color = 0;
            std::_Tree<std::_Tmap_traits<enum AgControllerComponentType,std::list<AgControllerComponent *>,std::less<enum AgControllerComponentType>,std::allocator<std::pair<enum AgControllerComponentType const,std::list<AgControllerComponent *>>>,0>>::_Rrotate(
              (std::_Tree<std::_Tmap_traits<AgStringRef,AgJsonNode,std::less<AgStringRef>,std::allocator<std::pair<AgStringRef const ,AgJsonNode> >,0> > *)this,
              v19);
            v19 = (std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *)Parent->_Right;
          }
          v19->_Color = Parent->_Color;
          Parent->_Color = 1;
          v19->_Right->_Color = 1;
          std::_Tree<std::_Tmap_traits<AgControllerUID,FighterOperationMapper,std::less<AgControllerUID>,std::allocator<std::pair<AgControllerUID const,FighterOperationMapper>>,0>>::_Lrotate(
            (std::_Tree<std::_Tmap_traits<AgStringRef,AgJsonNode,std::less<AgStringRef>,std::allocator<std::pair<AgStringRef const ,AgJsonNode> >,0> > *)this,
            (std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *)Parent);
          break;
        }
LABEL_75:
        v19->_Color = 0;
      }
    }
    else
    {
      if ( !v19->_Color )
      {
        v19->_Color = 1;
        Parent->_Color = 0;
        v22 = Parent->_Left;
        Parent->_Left = Parent->_Left->_Right;
        v23 = v22->_Right;
        if ( !v23->_Isnil )
          v23->_Parent = Parent;
        v22->_Parent = Parent->_Parent;
        if ( Parent == this->_Mypair._Myval2._Myval2._Myhead->_Parent )
        {
          this->_Mypair._Myval2._Myval2._Myhead->_Parent = v22;
        }
        else
        {
          v24 = Parent->_Parent;
          if ( Parent == v24->_Right )
            v24->_Right = v22;
          else
            v24->_Left = v22;
        }
        v22->_Right = Parent;
        Parent->_Parent = v22;
        v19 = (std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *)Parent->_Left;
      }
      if ( !v19->_Isnil )
      {
        if ( v19->_Right->_Color != 1 || v19->_Left->_Color != 1 )
        {
          if ( v19->_Left->_Color == 1 )
          {
            v19->_Right->_Color = 1;
            v19->_Color = 0;
            std::_Tree<std::_Tmap_traits<AgControllerUID,FighterOperationMapper,std::less<AgControllerUID>,std::allocator<std::pair<AgControllerUID const,FighterOperationMapper>>,0>>::_Lrotate(
              (std::_Tree<std::_Tmap_traits<AgStringRef,AgJsonNode,std::less<AgStringRef>,std::allocator<std::pair<AgStringRef const ,AgJsonNode> >,0> > *)this,
              v19);
            v19 = (std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *)Parent->_Left;
          }
          v19->_Color = Parent->_Color;
          Parent->_Color = 1;
          v19->_Left->_Color = 1;
          std::_Tree<std::_Tmap_traits<enum AgControllerComponentType,std::list<AgControllerComponent *>,std::less<enum AgControllerComponentType>,std::allocator<std::pair<enum AgControllerComponentType const,std::list<AgControllerComponent *>>>,0>>::_Rrotate(
            (std::_Tree<std::_Tmap_traits<AgStringRef,AgJsonNode,std::less<AgStringRef>,std::allocator<std::pair<AgStringRef const ,AgJsonNode> >,0> > *)this,
            (std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *)Parent);
          break;
        }
        goto LABEL_75;
      }
    }
    Parent = Parent->_Parent;
    Left = v18;
  }
  Left->_Color = 1;
LABEL_84:
  AgString::~AgString(&v5->_Myval.first.m_string, (unsigned __int64)result);
  operator delete(v5);
  Mysize = this->_Mypair._Myval2._Myval2._Mysize;
  if ( Mysize )
    this->_Mypair._Myval2._Myval2._Mysize = Mysize - 1;
  v3->_Ptr = Ptr;
  return v3;
}

std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > > *__fastcall std::_Tree<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>::erase(
        std::_Tree<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgLogger *> >,0> > *this,
        std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > > *result,
        std::_Tree_const_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > > _First,
        std::_Tree_const_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > > _Last)
{
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *Myhead; // rdx
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v7; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *Left; // rcx
  std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > > *v9; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v10; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *Right; // rdx
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *j; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *i; // rcx
  std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > > resulta; // [rsp+30h] [rbp+8h] BYREF
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v15; // [rsp+40h] [rbp+18h]
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *Ptr; // [rsp+48h] [rbp+20h]

  Ptr = _Last._Ptr;
  v15 = _First._Ptr;
  Myhead = this->_Mypair._Myval2._Myval2._Myhead;
  if ( _First._Ptr == this->_Mypair._Myval2._Myval2._Myhead->_Left && _Last._Ptr == Myhead )
  {
    std::_Tree<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>::_Erase(
      this,
      Myhead->_Parent);
    this->_Mypair._Myval2._Myval2._Myhead->_Parent = this->_Mypair._Myval2._Myval2._Myhead;
    this->_Mypair._Myval2._Myval2._Myhead->_Left = this->_Mypair._Myval2._Myval2._Myhead;
    this->_Mypair._Myval2._Myval2._Myhead->_Right = this->_Mypair._Myval2._Myval2._Myhead;
    v7 = this->_Mypair._Myval2._Myval2._Myhead;
    this->_Mypair._Myval2._Myval2._Mysize = 0i64;
    Left = v7->_Left;
    v9 = result;
    result->_Ptr = Left;
  }
  else
  {
    if ( _First._Ptr != _Last._Ptr )
    {
      do
      {
        v10 = _First._Ptr;
        if ( !_First._Ptr->_Isnil )
        {
          Right = _First._Ptr->_Right;
          if ( Right->_Isnil )
          {
            for ( i = _First._Ptr->_Parent; !i->_Isnil; i = i->_Parent )
            {
              if ( _First._Ptr != i->_Right )
                break;
              v15 = i;
              _First._Ptr = i;
            }
            v15 = i;
          }
          else
          {
            for ( j = Right->_Left; !j->_Isnil; j = j->_Left )
              Right = j;
            v15 = Right;
          }
        }
        std::_Tree<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>::erase(
          this,
          &resulta,
          (std::_Tree_const_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > >)v10);
        _First._Ptr = v15;
      }
      while ( v15 != Ptr );
    }
    v9 = result;
    result->_Ptr = _First._Ptr;
  }
  return v9;
}

std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > > *__fastcall std::_Tree<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgLogger *>>,0>>::erase(
        std::_Tree<std::_Tmap_traits<AgStringKey,AgLogger *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const ,AgLogger *> >,0> > *this,
        std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > > *result,
        std::_Tree_const_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > > _Where)
{
  std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > > *v3; // r15
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v5; // rsi
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *Right; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *j; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *i; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *Left; // rdi
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *Parent; // rbx
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v11; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *k; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v13; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *m; // rax
  std::_Tree_const_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > > *v15; // rax
  char Color; // cl
  bool n; // zf
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v18; // r8
  std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *v19; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v20; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v21; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v22; // rcx
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v23; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *v24; // rax
  unsigned __int64 Mysize; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *Ptr; // [rsp+60h] [rbp+18h]

  Ptr = _Where._Ptr;
  v3 = result;
  v5 = _Where._Ptr;
  if ( !_Where._Ptr->_Isnil )
  {
    Right = _Where._Ptr->_Right;
    if ( Right->_Isnil )
    {
      for ( i = _Where._Ptr->_Parent; !i->_Isnil; i = i->_Parent )
      {
        if ( _Where._Ptr != i->_Right )
          break;
        _Where._Ptr = i;
      }
      _Where._Ptr = i;
      Ptr = i;
    }
    else
    {
      _Where._Ptr = _Where._Ptr->_Right;
      for ( j = Right->_Left; !j->_Isnil; j = j->_Left )
        _Where._Ptr = j;
      Ptr = _Where._Ptr;
    }
  }
  if ( v5->_Left->_Isnil )
  {
    Left = v5->_Right;
  }
  else if ( v5->_Right->_Isnil )
  {
    Left = v5->_Left;
  }
  else
  {
    Left = _Where._Ptr->_Right;
    if ( _Where._Ptr != v5 )
    {
      v5->_Left->_Parent = _Where._Ptr;
      _Where._Ptr->_Left = v5->_Left;
      if ( _Where._Ptr == v5->_Right )
      {
        Parent = _Where._Ptr;
      }
      else
      {
        Parent = _Where._Ptr->_Parent;
        if ( !Left->_Isnil )
          Left->_Parent = Parent;
        Parent->_Left = Left;
        _Where._Ptr->_Right = v5->_Right;
        v5->_Right->_Parent = _Where._Ptr;
      }
      if ( this->_Mypair._Myval2._Myval2._Myhead->_Parent == v5 )
      {
        this->_Mypair._Myval2._Myval2._Myhead->_Parent = _Where._Ptr;
      }
      else
      {
        v15 = (std::_Tree_const_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > > *)v5->_Parent;
        if ( v15->_Ptr == v5 )
          v15->_Ptr = _Where._Ptr;
        else
          v15[2]._Ptr = _Where._Ptr;
      }
      _Where._Ptr->_Parent = v5->_Parent;
      Color = _Where._Ptr->_Color;
      _Where._Ptr->_Color = v5->_Color;
      v5->_Color = Color;
      goto LABEL_45;
    }
  }
  Parent = v5->_Parent;
  if ( !Left->_Isnil )
    Left->_Parent = Parent;
  if ( this->_Mypair._Myval2._Myval2._Myhead->_Parent == v5 )
  {
    this->_Mypair._Myval2._Myval2._Myhead->_Parent = Left;
  }
  else if ( Parent->_Left == v5 )
  {
    Parent->_Left = Left;
  }
  else
  {
    Parent->_Right = Left;
  }
  if ( this->_Mypair._Myval2._Myval2._Myhead->_Left == v5 )
  {
    if ( Left->_Isnil )
    {
      v11 = Parent;
    }
    else
    {
      v11 = Left;
      for ( k = Left->_Left; !k->_Isnil; k = k->_Left )
        v11 = k;
    }
    this->_Mypair._Myval2._Myval2._Myhead->_Left = v11;
  }
  result = (std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > > *)this->_Mypair._Myval2._Myval2._Myhead;
  if ( this->_Mypair._Myval2._Myval2._Myhead->_Right == v5 )
  {
    if ( Left->_Isnil )
    {
      v13 = Parent;
    }
    else
    {
      v13 = Left;
      for ( m = Left->_Right; !m->_Isnil; m = m->_Right )
        v13 = m;
    }
    result[2]._Ptr = v13;
  }
LABEL_45:
  if ( v5->_Color != 1 )
    goto LABEL_84;
  for ( n = Left == this->_Mypair._Myval2._Myval2._Myhead->_Parent;
        !n;
        n = result == (std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > > *)this->_Mypair._Myval2._Myval2._Myhead->_Parent )
  {
    result = (std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgLogger *> > > > *)Parent;
    v18 = Parent;
    if ( Left->_Color != 1 )
      break;
    v19 = (std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *)Parent->_Left;
    if ( Left == Parent->_Left )
    {
      v19 = (std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *)Parent->_Right;
      if ( !v19->_Color )
      {
        v19->_Color = 1;
        Parent->_Color = 0;
        v20 = Parent->_Right;
        Parent->_Right = v20->_Left;
        if ( !v20->_Left->_Isnil )
          v20->_Left->_Parent = Parent;
        v20->_Parent = Parent->_Parent;
        if ( Parent == this->_Mypair._Myval2._Myval2._Myhead->_Parent )
        {
          this->_Mypair._Myval2._Myval2._Myhead->_Parent = v20;
        }
        else
        {
          v21 = Parent->_Parent;
          if ( Parent == v21->_Left )
            v21->_Left = v20;
          else
            v21->_Right = v20;
        }
        v20->_Left = Parent;
        Parent->_Parent = v20;
        v19 = (std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *)Parent->_Right;
      }
      if ( !v19->_Isnil )
      {
        if ( v19->_Left->_Color != 1 || v19->_Right->_Color != 1 )
        {
          if ( v19->_Right->_Color == 1 )
          {
            v19->_Left->_Color = 1;
            v19->_Color = 0;
            std::_Tree<std::_Tmap_traits<enum AgControllerComponentType,std::list<AgControllerComponent *>,std::less<enum AgControllerComponentType>,std::allocator<std::pair<enum AgControllerComponentType const,std::list<AgControllerComponent *>>>,0>>::_Rrotate(
              (std::_Tree<std::_Tmap_traits<AgStringRef,AgJsonNode,std::less<AgStringRef>,std::allocator<std::pair<AgStringRef const ,AgJsonNode> >,0> > *)this,
              v19);
            v19 = (std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *)Parent->_Right;
          }
          v19->_Color = Parent->_Color;
          Parent->_Color = 1;
          v19->_Right->_Color = 1;
          std::_Tree<std::_Tmap_traits<AgControllerUID,FighterOperationMapper,std::less<AgControllerUID>,std::allocator<std::pair<AgControllerUID const,FighterOperationMapper>>,0>>::_Lrotate(
            (std::_Tree<std::_Tmap_traits<AgStringRef,AgJsonNode,std::less<AgStringRef>,std::allocator<std::pair<AgStringRef const ,AgJsonNode> >,0> > *)this,
            (std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *)Parent);
          break;
        }
LABEL_75:
        v19->_Color = 0;
      }
    }
    else
    {
      if ( !v19->_Color )
      {
        v19->_Color = 1;
        Parent->_Color = 0;
        v22 = Parent->_Left;
        Parent->_Left = Parent->_Left->_Right;
        v23 = v22->_Right;
        if ( !v23->_Isnil )
          v23->_Parent = Parent;
        v22->_Parent = Parent->_Parent;
        if ( Parent == this->_Mypair._Myval2._Myval2._Myhead->_Parent )
        {
          this->_Mypair._Myval2._Myval2._Myhead->_Parent = v22;
        }
        else
        {
          v24 = Parent->_Parent;
          if ( Parent == v24->_Right )
            v24->_Right = v22;
          else
            v24->_Left = v22;
        }
        v22->_Right = Parent;
        Parent->_Parent = v22;
        v19 = (std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *)Parent->_Left;
      }
      if ( !v19->_Isnil )
      {
        if ( v19->_Right->_Color != 1 || v19->_Left->_Color != 1 )
        {
          if ( v19->_Left->_Color == 1 )
          {
            v19->_Right->_Color = 1;
            v19->_Color = 0;
            std::_Tree<std::_Tmap_traits<AgControllerUID,FighterOperationMapper,std::less<AgControllerUID>,std::allocator<std::pair<AgControllerUID const,FighterOperationMapper>>,0>>::_Lrotate(
              (std::_Tree<std::_Tmap_traits<AgStringRef,AgJsonNode,std::less<AgStringRef>,std::allocator<std::pair<AgStringRef const ,AgJsonNode> >,0> > *)this,
              v19);
            v19 = (std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *)Parent->_Left;
          }
          v19->_Color = Parent->_Color;
          Parent->_Color = 1;
          v19->_Left->_Color = 1;
          std::_Tree<std::_Tmap_traits<enum AgControllerComponentType,std::list<AgControllerComponent *>,std::less<enum AgControllerComponentType>,std::allocator<std::pair<enum AgControllerComponentType const,std::list<AgControllerComponent *>>>,0>>::_Rrotate(
            (std::_Tree<std::_Tmap_traits<AgStringRef,AgJsonNode,std::less<AgStringRef>,std::allocator<std::pair<AgStringRef const ,AgJsonNode> >,0> > *)this,
            (std::_Tree_node<std::pair<AgStringRef const ,AgJsonNode>,void *> *)Parent);
          break;
        }
        goto LABEL_75;
      }
    }
    Parent = Parent->_Parent;
    Left = v18;
  }
  Left->_Color = 1;
LABEL_84:
  AgString::~AgString(&v5->_Myval.first.m_string, (unsigned __int64)result);
  operator delete(v5);
  Mysize = this->_Mypair._Myval2._Myval2._Mysize;
  if ( Mysize )
    this->_Mypair._Myval2._Myval2._Mysize = Mysize - 1;
  v3->_Ptr = Ptr;
  return v3;
}

void __fastcall AgFileLogger::flush(AgFileLogger *this)
{
  AgMutex *p_m_logMutex; // rbx

  if ( !this->m_instaFlush )
  {
    p_m_logMutex = &this->m_logMutex;
    EnterCriticalSection((LPCRITICAL_SECTION)&this->m_logMutex);
    fflush(this->m_logFile);
    LeaveCriticalSection((LPCRITICAL_SECTION)p_m_logMutex);
  }
}

void __fastcall AgForwardLogger::flush(AgForwardLogger *this)
{
  AgLogger **i; // rbx

  for ( i = this->m_targets._Mypair._Myval2._Myfirst; i != this->m_targets._Mypair._Myval2._Mylast; ++i )
    (*i)->flush(*i);
}

void __fastcall ActorWeapon::ActionFlagCheck(_SETJMP_FLOAT128 *JumpBuffer)
{
  ;
}

AgDebugChannelData *__fastcall AgDebugChannels::get(AgDebugChannels *this, AgStringRef *name)
{
  unsigned __int64 v4; // rdx
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *Myhead; // rbx
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *Parent; // rdi
  AgDebugChannelData *v7; // rbx
  std::pair<AgStringKey,AgDebugChannelData *> *v8; // rax
  std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *_Newnode; // rax
  unsigned __int64 v10; // rdx
  unsigned __int64 v11; // rdx
  AgStringRef *v12; // rdi
  int LastIndexOf; // eax
  AgDebugChannelData *v14; // rax
  AgDebugChannelData *second; // rbx
  AgStringRef copy; // [rsp+30h] [rbp-49h] BYREF
  int v18; // [rsp+40h] [rbp-39h]
  AgDebugChannels *v19; // [rsp+48h] [rbp-31h]
  AgStringKey str; // [rsp+50h] [rbp-29h] BYREF
  AgString v21; // [rsp+70h] [rbp-9h] BYREF
  AgStringRef s2; // [rsp+80h] [rbp+7h] BYREF
  __int64 v23; // [rsp+90h] [rbp+17h]
  std::pair<AgStringKey,AgDebugChannelData *> result; // [rsp+98h] [rbp+1Fh] BYREF
  AgDebugChannelData *_Val2; // [rsp+E0h] [rbp+67h] BYREF
  AgStringRef *v26; // [rsp+E8h] [rbp+6Fh]

  v26 = name;
  v23 = -2i64;
  v19 = this;
  EnterCriticalSection((LPCRITICAL_SECTION)this);
  v18 = 1;
  if ( !defaultInit )
  {
    defaultInit = 1;
    AgDebugChannels::_initRootChannel(this);
  }
  AgString::AgString(&v21);
  s2 = *name;
  Myhead = this->m_channels._Mypair._Myval2._Myval2._Myhead;
  Parent = Myhead->_Parent;
  while ( !Parent->_Isnil )
  {
    if ( operator<(&Parent->_Myval.first.m_stringRef, &s2) )
    {
      Parent = Parent->_Right;
    }
    else
    {
      Myhead = Parent;
      Parent = Parent->_Left;
    }
  }
  if ( Myhead == this->m_channels._Mypair._Myval2._Myval2._Myhead || operator<(&s2, &Myhead->_Myval.first.m_stringRef) )
    Myhead = this->m_channels._Mypair._Myval2._Myval2._Myhead;
  AgString::~AgString(&v21, v4);
  if ( Myhead == this->m_channels._Mypair._Myval2._Myval2._Myhead )
  {
    v7 = (AgDebugChannelData *)operator new(0x28ui64);
    _Val2 = v7;
    if ( v7 )
    {
      copy = *v26;
      v7->m_parent = 0i64;
      AgString::AgString(&v7->m_name, &copy);
      v7->m_config.m_enabled = -1;
      v7->m_config.m_verbosity = AgLogVerbosity_Inherit;
      v7->m_logger = 0i64;
    }
    else
    {
      v7 = 0i64;
    }
    _Val2 = v7;
    AgString::AgString(&str.m_string, v26);
    AgStringRef::AgStringRef(&str.m_stringRef, &str.m_string);
    v8 = std::make_pair<AgStringKey,AgDebugChannelData *>(&result, &str, &_Val2);
    _Newnode = std::_Tree_comp_alloc<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::_Buynode<std::pair<AgStringKey,AgDebugChannelData *>>(
                 &this->m_channels,
                 v8);
    std::_Tree<std::_Tmap_traits<AgStringKey,AgDebugChannelData *,std::less<AgStringKey>,std::allocator<std::pair<AgStringKey const,AgDebugChannelData *>>,0>>::_Insert_nohint<std::pair<AgStringKey const,AgDebugChannelData *> &,std::_Tree_node<std::pair<AgStringKey const,AgDebugChannelData *>,void *> *>(
      &this->m_channels,
      (std::pair<std::_Tree_iterator<std::_Tree_val<std::_Tree_simple_types<std::pair<AgStringKey const ,AgDebugChannelData *> > > >,bool> *)&copy,
      0,
      &_Newnode->_Myval,
      _Newnode);
    _Val2 = (AgDebugChannelData *)&result;
    AgString::~AgString(&result.first.m_string, v10);
    AgString::~AgString(&str.m_string, v11);
    Myhead = (std::_Tree_node<std::pair<AgStringKey const ,AgDebugChannelData *>,void *> *)copy.m_text;
    v12 = v26;
    LastIndexOf = AgStringRef::getLastIndexOf(v26, 46, 0xFFFFFFFF);
    if ( LastIndexOf == -1 )
    {
      v14 = rootChannel;
    }
    else
    {
      copy = *AgStringRef::getSubString(v12, (AgStringRef *)&str, 0, LastIndexOf);
      v14 = AgDebugChannels::get(this, &copy);
    }
    Myhead->_Myval.second->m_parent = v14;
  }
  second = Myhead->_Myval.second;
  LeaveCriticalSection((LPCRITICAL_SECTION)this);
  return second;
}

// attributes: thunk
AgDebugChannels *__fastcall AgDebugChannels::getInstance()
{
  return AgDebugChannels::getInstanceAndInit();
}

AgDebugChannels *__fastcall AgDebugChannels::getInstanceAndInit()
{
  AgDebugChannels *result; // rax
  AgDebugChannels *v1; // rax

  result = AgDebugChannels::ms_instance;
  if ( !AgDebugChannels::ms_instance )
  {
    v1 = (AgDebugChannels *)operator new((unsigned int)((_DWORD)AgDebugChannels::ms_instance + 72));
    if ( v1 )
    {
      *(_QWORD *)v1->m_mutex.m_data.m_criticalSection.data = 0i64;
      *(_QWORD *)&v1->m_mutex.m_data.m_criticalSection.data[8] = 0i64;
      *(_QWORD *)&v1->m_mutex.m_data.m_criticalSection.data[16] = 0i64;
      *(_QWORD *)&v1->m_mutex.m_data.m_criticalSection.data[24] = 0i64;
      *(_QWORD *)&v1->m_mutex.m_data.m_criticalSection.data[32] = 0i64;
      v1->m_channels._Mypair._Myval2._Myval2._Myhead = 0i64;
      v1->m_channels._Mypair._Myval2._Myval2._Mysize = 0i64;
      v1->m_loggers._Mypair._Myval2._Myval2._Myhead = 0i64;
      v1->m_loggers._Mypair._Myval2._Myval2._Mysize = 0i64;
      AgDebugChannels::AgDebugChannels(v1);
    }
    AgDebugChannels::ms_instance = v1;
    AgDebugChannels::_initDefaultLoggers(v1);
    AgDebugChannels::_initRootChannel(AgDebugChannels::ms_instance);
    return AgDebugChannels::ms_instance;
  }
  return result;
}

__int64 __fastcall AgDebugChannelData::getVerbosity(AgDebugChannelData *this)
{
  if ( this->m_config.m_verbosity != AgLogVerbosity_Inherit )
    return (unsigned int)this->m_config.m_verbosity;
  while ( 1 )
  {
    this = this->m_parent;
    if ( !this )
      break;
    if ( this->m_config.m_verbosity != AgLogVerbosity_Inherit )
      return (unsigned int)this->m_config.m_verbosity;
  }
  return 0i64;
}

__int64 __fastcall AgLogger::getVerbosityIDByName(AgStringRef *name)
{
  bool v3; // al
  unsigned int v4; // ecx
  AgStringRef s2; // [rsp+20h] [rbp-18h] BYREF

  AgStringRef::AgStringRef(&s2, "any");
  if ( operator==(name, &s2) )
    return 0i64;
  AgStringRef::AgStringRef(&s2, "error");
  if ( operator==(name, &s2) )
    return 1i64;
  AgStringRef::AgStringRef(&s2, "warning");
  if ( operator==(name, &s2) )
    return 2i64;
  AgStringRef::AgStringRef(&s2, "info");
  v3 = operator==(name, &s2);
  v4 = -1;
  if ( v3 )
    return 3;
  return v4;
}

__int64 __fastcall AgDebugChannelData::isEnabled(AgDebugChannelData *this)
{
  if ( this->m_config.m_enabled != -1 )
    return (unsigned int)this->m_config.m_enabled;
  while ( 1 )
  {
    this = this->m_parent;
    if ( !this )
      break;
    if ( this->m_config.m_enabled != -1 )
      return (unsigned int)this->m_config.m_enabled;
  }
  return 1i64;
}

void __fastcall AgConsoleLogger::log(AgConsoleLogger *this, AgLogVerbosity verbosity, const char *text, char *args)
{
  __int64 v6; // rbp
  unsigned __int64 *v8; // rax
  AgMutex *p_m_logMutex; // rbx
  _iobuf *v10; // rax
  _iobuf *v11; // rax
  _iobuf *v12; // rax
  char buffer[2048]; // [rsp+50h] [rbp-828h] BYREF

  v6 = verbosity;
  if ( (unsigned int)globalGetLogConsole() )
  {
    v8 = _local_stdio_printf_options();
    _stdio_common_vsprintf_s(*v8, buffer, 0x800ui64, text, 0i64, args);
    p_m_logMutex = &this->m_logMutex;
    EnterCriticalSection((LPCRITICAL_SECTION)p_m_logMutex);
    if ( !gs_consoleOpened )
    {
      AllocConsole();
      v10 = _acrt_iob_func(0);
      freopen("conin$", "r", v10);
      v11 = _acrt_iob_func(1u);
      freopen("conout$", "w", v11);
      v12 = _acrt_iob_func(2u);
      freopen("conout$", "w", v12);
      gs_consoleOpened = 1;
    }
    printf("%s%s\n", *((const char **)&off_140A29428 + v6), buffer);
    LeaveCriticalSection((LPCRITICAL_SECTION)p_m_logMutex);
  }
}

void __fastcall AgDebugChannelData::log(AgDebugChannelData *this, __int64 verbosity, const char *text, char *args)
{
  if ( this->m_logger )
  {
LABEL_4:
    this->m_logger->log(this->m_logger, (AgLogVerbosity)verbosity, text, args);
  }
  else
  {
    while ( 1 )
    {
      this = this->m_parent;
      if ( !this )
        break;
      if ( this->m_logger )
        goto LABEL_4;
    }
  }
}

void __fastcall AgDebuggerLogger::log(AgDebuggerLogger *this, AgLogVerbosity verbosity, const char *text, char *args)
{
  __int64 v6; // rdi
  unsigned __int64 *v8; // rax
  char buffer[2048]; // [rsp+60h] [rbp-828h] BYREF

  v6 = verbosity;
  if ( IsDebuggerPresent() )
  {
    v8 = _local_stdio_printf_options();
    _stdio_common_vsnprintf_s(*v8, buffer, 0x800ui64, 0xFFFFFFFFFFFFFFFFui64, text, 0i64, args);
    EnterCriticalSection((LPCRITICAL_SECTION)&this->m_logMutex);
    OutputDebugStringA(*((LPCSTR *)&off_140A29428 + v6));
    OutputDebugStringA("\t");
    OutputDebugStringA(buffer);
    LeaveCriticalSection((LPCRITICAL_SECTION)&this->m_logMutex);
  }
}

void __fastcall AgFileLogger::log(AgFileLogger *this, AgLogVerbosity verbosity, const char *text, char *args)
{
  __int64 v6; // rsi
  unsigned __int64 *v8; // rax
  char buffer[2048]; // [rsp+60h] [rbp-838h] BYREF

  v6 = verbosity;
  v8 = _local_stdio_printf_options();
  _stdio_common_vsnprintf_s(*v8, buffer, 0x800ui64, 0xFFFFFFFFFFFFFFFFui64, text, 0i64, args);
  EnterCriticalSection((LPCRITICAL_SECTION)&this->m_logMutex);
  fprintf(this->m_logFile, "%s%s\n", *((const char **)&off_140A29428 + v6), buffer);
  if ( this->m_instaFlush )
    fflush(this->m_logFile);
  LeaveCriticalSection((LPCRITICAL_SECTION)&this->m_logMutex);
}

void __fastcall AgForwardLogger::log(AgForwardLogger *this, unsigned __int64 verbosity, const char *text, char *args)
{
  unsigned int v6; // er13
  AgString *Mylast; // rax
  AgString *Myfirst; // rbx
  AgDebugChannels *InstanceAndInit; // r14
  unsigned __int64 v11; // rdx
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *Myhead; // rsi
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *Parent; // rdi
  AgString *v14; // rdi
  AgString *i; // rbx
  AgLogger **j; // rbx
  __int64 v17; // [rsp+20h] [rbp-58h]
  AgString v18; // [rsp+28h] [rbp-50h] BYREF
  AgStringRef s2; // [rsp+38h] [rbp-40h] BYREF

  v17 = -2i64;
  v6 = verbosity;
  Mylast = this->m_lateBindTargets._Mypair._Myval2._Mylast;
  if ( this->m_lateBindTargets._Mypair._Myval2._Myfirst != Mylast )
  {
    Myfirst = this->m_lateBindTargets._Mypair._Myval2._Myfirst;
    if ( Myfirst != Mylast )
    {
      do
      {
        InstanceAndInit = AgDebugChannels::getInstanceAndInit();
        AgString::AgString(&v18);
        AgStringRef::AgStringRef(&s2, Myfirst);
        Myhead = InstanceAndInit->m_loggers._Mypair._Myval2._Myval2._Myhead;
        Parent = Myhead->_Parent;
        while ( !Parent->_Isnil )
        {
          if ( operator<(&Parent->_Myval.first.m_stringRef, &s2) )
          {
            Parent = Parent->_Right;
          }
          else
          {
            Myhead = Parent;
            Parent = Parent->_Left;
          }
        }
        if ( Myhead == InstanceAndInit->m_loggers._Mypair._Myval2._Myval2._Myhead
          || operator<(&s2, &Myhead->_Myval.first.m_stringRef) )
        {
          Myhead = InstanceAndInit->m_loggers._Mypair._Myval2._Myval2._Myhead;
        }
        AgString::~AgString(&v18, v11);
        if ( Myhead != InstanceAndInit->m_loggers._Mypair._Myval2._Myval2._Myhead )
          std::vector<AgLogger *>::push_back(&this->m_targets, &Myhead->_Myval.second);
        ++Myfirst;
      }
      while ( Myfirst != this->m_lateBindTargets._Mypair._Myval2._Mylast );
    }
    v14 = this->m_lateBindTargets._Mypair._Myval2._Mylast;
    for ( i = this->m_lateBindTargets._Mypair._Myval2._Myfirst; i != v14; ++i )
      AgString::~AgString(i, verbosity);
    this->m_lateBindTargets._Mypair._Myval2._Mylast = this->m_lateBindTargets._Mypair._Myval2._Myfirst;
  }
  for ( j = this->m_targets._Mypair._Myval2._Myfirst; j != this->m_targets._Mypair._Myval2._Mylast; ++j )
    ((void (__fastcall *)(AgLogger *, _QWORD, const char *, char *, __int64))(*j)->log)(*j, v6, text, args, v17);
}

void __fastcall AgConsoleLogger::logFormatted(AgConsoleLogger *this, const char *text)
{
  AgMutex *p_m_logMutex; // rbx

  p_m_logMutex = &this->m_logMutex;
  EnterCriticalSection((LPCRITICAL_SECTION)&this->m_logMutex);
  printf(text);
  LeaveCriticalSection((LPCRITICAL_SECTION)p_m_logMutex);
}

void __fastcall AgDebuggerLogger::logFormatted(AgDebuggerLogger *this, const char *text)
{
  AgMutex *p_m_logMutex; // rbx

  p_m_logMutex = &this->m_logMutex;
  EnterCriticalSection((LPCRITICAL_SECTION)&this->m_logMutex);
  OutputDebugStringA(text);
  LeaveCriticalSection((LPCRITICAL_SECTION)p_m_logMutex);
}

void __fastcall AgFileLogger::logFormatted(AgFileLogger *this, const char *text)
{
  AgMutex *p_m_logMutex; // rbx

  p_m_logMutex = &this->m_logMutex;
  EnterCriticalSection((LPCRITICAL_SECTION)&this->m_logMutex);
  fprintf(this->m_logFile, text);
  LeaveCriticalSection((LPCRITICAL_SECTION)p_m_logMutex);
}

void __fastcall std::vector<AgLogger *>::push_back(std::vector<AgLogger *> *this, AgLogger *const *_Val)
{
  AgLogger **Mylast; // rax
  AgLogger **Myfirst; // rcx
  __int64 v6; // rdi
  AgLogger **v7; // rdx
  AgLogger **v8; // rcx

  Mylast = this->_Mypair._Myval2._Mylast;
  if ( _Val >= Mylast || (Myfirst = this->_Mypair._Myval2._Myfirst, Myfirst > _Val) )
  {
    if ( Mylast == this->_Mypair._Myval2._Myend )
      std::vector<AgLogger *>::_Reserve(this, 1ui64);
    v8 = this->_Mypair._Myval2._Mylast;
    if ( v8 )
      *v8 = *_Val;
  }
  else
  {
    v6 = _Val - Myfirst;
    if ( Mylast == this->_Mypair._Myval2._Myend )
      std::vector<AgLogger *>::_Reserve(this, 1ui64);
    v7 = this->_Mypair._Myval2._Mylast;
    if ( v7 )
    {
      *v7 = this->_Mypair._Myval2._Myfirst[v6];
      ++this->_Mypair._Myval2._Mylast;
      return;
    }
  }
  ++this->_Mypair._Myval2._Mylast;
}

void __fastcall AgDebugChannelData::setConfiguration(
        AgDebugChannelData *this,
        char enable,
        AgLogVerbosity verbosity,
        AgStringRef *out)
{
  AgStringRef v4; // [rsp+20h] [rbp-18h] BYREF

  this->m_config.m_enabled = enable;
  this->m_config.m_verbosity = verbosity;
  v4 = *out;
  AgDebugChannelData::setLogger(this, &v4);
}

void __fastcall AgDebugChannelData::setLogger(AgDebugChannelData *this, AgStringRef *out)
{
  AgDebugChannels *InstanceAndInit; // rsi
  unsigned __int64 v5; // rdx
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *Myhead; // rdi
  std::_Tree_node<std::pair<AgStringKey const ,AgLogger *>,void *> *Parent; // rbx
  AgString v8; // [rsp+28h] [rbp-30h] BYREF
  AgStringRef s2; // [rsp+38h] [rbp-20h] BYREF

  InstanceAndInit = AgDebugChannels::getInstanceAndInit();
  AgString::AgString(&v8);
  s2 = *out;
  Myhead = InstanceAndInit->m_loggers._Mypair._Myval2._Myval2._Myhead;
  Parent = Myhead->_Parent;
  while ( !Parent->_Isnil )
  {
    if ( operator<(&Parent->_Myval.first.m_stringRef, &s2) )
    {
      Parent = Parent->_Right;
    }
    else
    {
      Myhead = Parent;
      Parent = Parent->_Left;
    }
  }
  if ( Myhead == InstanceAndInit->m_loggers._Mypair._Myval2._Myval2._Myhead
    || operator<(&s2, &Myhead->_Myval.first.m_stringRef) )
  {
    Myhead = InstanceAndInit->m_loggers._Mypair._Myval2._Myval2._Myhead;
  }
  AgString::~AgString(&v8, v5);
  if ( Myhead != InstanceAndInit->m_loggers._Mypair._Myval2._Myval2._Myhead )
    this->m_logger = Myhead->_Myval.second;
}

